!function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{MinF:function(e,a,n){"use strict";n.r(a),n.d(a,"OpinionCumplimientoModule",function(){return Lt});var o,r,c,l=n("QibW"),s=n("ofXK"),b=n("tyNb"),d=n("3Pt+"),u=n("WsYS"),h=n("93Pz"),p=n("1jcm"),m=n("FKr1"),f=n("0IaG"),g=n("NFeN"),v=n("bSwM"),C=n("iadO"),S=n("1yaQ"),V=n("qFsG"),W=n("kmnG"),k=n("/1cH"),w=n("bTqV"),y=n("wZkO"),P=n("Qu3c"),D=n("d3UM"),R=n("Wp6s"),F=n("STbY"),O=n("bv9b"),x=n("Xa2L"),L=n("dNgK"),N=n("+0xr"),E=n("MutI"),G=n("XhcP"),A=n("5RNC"),M=n("zkoq"),q=n("jaxi"),z=n("8yBR"),I=n("M9IT"),B=n("A5z7"),U=n("xHqg"),T=n("Dh3D"),Q=n("/t3+"),j=n("2ChS"),$=n("7EHt"),_=n("f0Cb"),X=n("fXoL"),H=((o=function e(){i(this,e)}).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=X.Kb({type:o,selectors:[["kt-opinioncumplimiento"]],decls:1,vars:0,template:function(e,t){1&e&&X.Rb(0,"router-outlet")},directives:[b.m],encapsulation:2,changeDetection:0}),o),J=n("QJFE"),K=n("JqCM"),Y=n("+BVi"),Z=n("1kSV"),ee=n("5eHb"),te=n("jhN1"),ie=n("ptnc"),ae=n("LIxy"),ne=n("ap2d"),oe=((r=function(){function e(t,a){i(this,e),this.api=t,this.router=a,this.oDetalleCliente={}}return t(e,[{key:"GetDetalleOpinionCumplimiento",value:function(){return this.api.get("validator/client",{})}},{key:"GetCliente",value:function(e){return this.api.post("validator/client",e)}},{key:"GetOpinionPreveedor",value:function(e){return this.api.post("OpinionCumplimiento/list",e)}},{key:"ProcesaArchivoPDF",value:function(e){return this.api.post("OpinionCumplimiento",e).toPromise()}},{key:"GetRevisionOpiniones",value:function(){return this.api.get("RevisionOpinion",{})}},{key:"AplicaFiltros",value:function(e){return this.api.post("RevisionOpinion/Filter",e)}}]),e}()).\u0275fac=function(e){return new(e||r)(X.dc(ne.a),X.dc(b.h))},r.\u0275prov=X.Mb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),re=n("tk/3"),ce=n("AytR"),le=n("lJxs"),se=((c=function(){function e(t){i(this,e),this.httpClient=t}return t(e,[{key:"upload",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.httpClient.post("".concat(ce.a.apiUrl,"/").concat(e),t,{headers:new re.e({Authorization:"Bearer "+a.token}),reportProgress:!0,observe:"events"}).pipe(Object(le.a)(function(e){switch(e.type){case re.d.UploadProgress:return{status:"progress",message:Math.round(100*e.loaded/e.total)};case re.d.Response:return e.body;default:return"Unhandled"}}))}},{key:"ProcessCargaArchivoPromise",value:function(e){return this.httpOptions=this.getToken(),this.httpClient.get("".concat(ce.a.apiUrl,"/").concat(e),Object.assign({},this.httpOptions)).toPromise()}},{key:"uploadOpinion",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.httpClient.post("".concat(ce.a.apiUrl,"/").concat(e),t,{headers:new re.e({Authorization:"Bearer "+a.token}),reportProgress:!0,observe:"events"}).pipe(Object(le.a)(function(e){switch(e.type){case re.d.UploadProgress:return{status:"progress",message:Math.round(100*e.loaded/e.total)};case re.d.Response:return e.body;default:return"Unhandled"}}))}},{key:"getToken",value:function(){var e=localStorage.getItem("id_token");return{headers:new re.e({"Content-Type":"application/json",Authorization:"Bearer "+e})}}}]),e}()).\u0275fac=function(e){return new(e||c)(X.dc(re.b))},c.\u0275prov=X.Mb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),be=["matPaginator7"],de=["sort7"],ue=["popCCliente"];function he(e,t){if(1&e){var i=X.Xb();X.Wb(0,"div"),X.Wb(1,"div",22),X.Wb(2,"div",23),X.Wb(3,"h5",24),X.Rb(4,"i",25),X.Nc(5," Proveedor"),X.Vb(),X.Vb(),X.Wb(6,"div",23),X.Rb(7,"hr"),X.Vb(),X.Vb(),X.Wb(8,"div",22),X.Wb(9,"div",26),X.Wb(10,"div",27),X.Wb(11,"label"),X.Nc(12,"Nombre"),X.Vb(),X.Wb(13,"label",28),X.Nc(14),X.Vb(),X.Vb(),X.Vb(),X.Wb(15,"div",29),X.Wb(16,"div",27),X.Wb(17,"label"),X.Nc(18,"RFC"),X.Vb(),X.Wb(19,"label",28),X.Nc(20),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Wb(21,"div",22),X.Wb(22,"div",30),X.Wb(23,"a",31),X.gc("click",function(){return X.Bc(i),X.kc().Regresar(!0)}),X.Nc(24,"Cancelar"),X.Vb(),X.Vb(),X.Vb(),X.Vb()}if(2&e){var a=X.kc();X.Cb(14),X.Pc(" ",a.General.Cliente.NombreCliente,""),X.Cb(6),X.Pc(" ",a.General.Cliente.RFC,"")}}var pe=function(e){return{width:e}};function me(e,t){if(1&e&&(X.Wb(0,"div",32),X.Rb(1,"br"),X.Wb(2,"div",33),X.Rb(3,"div",34),X.Vb(),X.Vb()),2&e){var i=X.kc();X.Cb(3),X.qc("ngStyle",X.uc(1,pe,i.Avance.message+"%"))}}function fe(e,t){if(1&e){var i=X.Xb();X.Wb(0,"div",22),X.Wb(1,"div",35),X.Wb(2,"div",36),X.Wb(3,"h4",37),X.Nc(4,"Archivo Cargado correctamente"),X.Vb(),X.Wb(5,"p"),X.Nc(6," El Archivo se registr\xf3 correctamente."),X.Rb(7,"br"),X.Nc(8," A continuaci\xf3n ser\xe1 validado y recibira una notificaci\xf3n en caso de ser aceptado o rechazado."),X.Vb(),X.Rb(9,"div",38),X.Wb(10,"p",39),X.Wb(11,"button",40),X.gc("click",function(){return X.Bc(i),X.kc().Regresar(!0)}),X.Nc(12,"Aceptar"),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Vb()}}function ge(e,t){if(1&e){var i=X.Xb();X.Wb(0,"div",41),X.Wb(1,"h4",42),X.Wb(2,"span",43),X.Nc(3," Se ha detectado una carga previa"),X.Vb(),X.Vb(),X.Wb(4,"button",44),X.gc("click",function(){return(0,t.dismiss)("Cross click")}),X.Wb(5,"span",45),X.Nc(6,"\xd7"),X.Vb(),X.Vb(),X.Vb(),X.Wb(7,"div",46),X.Wb(8,"div",22),X.Wb(9,"div",23),X.Wb(10,"div",27),X.Wb(11,"label"),X.Nc(12,"Si desea volver a cargar su opini\xf3n de cumplimiento, favor de ingresar el motivo"),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Wb(13,"div",22),X.Wb(14,"div",23),X.Wb(15,"div",27),X.Wb(16,"label"),X.Nc(17,"Motivo:"),X.Vb(),X.Wb(18,"textarea",47),X.gc("ngModelChange",function(e){return X.Bc(i),X.kc().General.Cliente.MotivoActualizacion=e}),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Wb(19,"div",48),X.Wb(20,"button",49),X.gc("click",function(){return X.Bc(i),X.kc().AceptaCarga()}),X.Nc(21,"Aceptar"),X.Vb(),X.Wb(22,"button",50),X.gc("click",function(){return(0,t.close)("Close click")}),X.Nc(23,"Cancelar"),X.Vb(),X.Vb()}if(2&e){var a=X.kc();X.Cb(18),X.qc("ngModel",a.General.Cliente.MotivoActualizacion)}}var ve,Ce=((ve=function(){function e(t,a,n,o,r,c,l,s,b,d){i(this,e),this.snackBar=t,this.AuthService=a,this.toastr=n,this.spinnerService=o,this.router=r,this.sanitizer=c,this.modalService=l,this.OpinionCumplimientoService=s,this.UploadFilesService=b,this.ref=d,this.VistaPrincipal=new X.p,this.Page={},this.Screen={},this.General={},this.Avance={Break:0},this.Documento={},this.Archivo={},this.uploadResponse={status:"",message:0,filePath:""},this.ListaTipoSolicitud=[],this.modalReference=null,this.displayedColumns7=["No","NombrePerfil","actions"],this.Page.ShowAdd=!1,this.Page.ShowEdit=!1,this.Page.ShowUpload=!1,this.Page.ShowRegistro=!0,this.Page.ShowCargaExitosa=!1,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Cliente={}}return t(e,[{key:"ngOnInit",value:function(){Object.keys(this.OpinionCumplimientoService.oDetalleCliente).length>0?(this.General.Cliente=this.OpinionCumplimientoService.oDetalleCliente,this.Page.ShowUpload=!0,this.ref.detectChanges()):this.Regresar(!0)}},{key:"UpLoadFile",value:function(e){var t=this,i=[],a=(i=e.target.files[0].name).substring(i.length-5,i.length),n=e.target.files[0].size/1024,o=a.match(/\.(.+)$/)[1].toLowerCase();if(n>1024)return this.toastr.error("Tama\xf1o de archivo no valido, solo se puede cargar un maximo de 1MB","Error"),void(document.getElementById("fileUploadCuenta").value="");if("pdf"==o){var r=new FormData;r.append("file",e.target.files[0]),r.append("data",JSON.stringify(this.General.Cliente)),this.UploadFilesService.uploadOpinion("report/upload",r).subscribe(function(e){try{if(t.uploadResponse=e,"Unhandled"!=e&&Object.entries(e).length>0){if(e.hasOwnProperty("IdFile")){if(t.General.IdFile=e.IdFile,0==t.General.IdFile)return t.ErrorCargaArchivo(),void t.spinnerService.hide();t.Page.ShowRegistro=!1,t.Page.ShowUpload=!1,t.Page.ShowCargaExitosa=!0,t.ref.detectChanges(),t.timeouts=setTimeout(function(){t.ProcesarArchivo(),t.spinnerService.hide()},1e3)}t.Avance=Object.assign({},t.uploadResponse),t.ref.detectChanges()}100===t.Avance.message&&0==t.Avance.Break&&(t.timeouts=setTimeout(function(){t.openSnackBar("El archivo se cargo correctamente","Cerrar"),t.Avance={status:"",message:0},t.ref.detectChanges()},2e3)),document.getElementById("fileUploadCuenta").value=""}catch(i){t.Avance={status:"",message:100}}},function(e){t.ErrorCargaArchivo()})}else this.toastr.error("Archivo no v\xe1lido","Error")}},{key:"ErrorCargaArchivo",value:function(){this.Avance.Break=1,this.Avance={status:"",message:0},this.ref.detectChanges(),document.getElementById("fileUploadCuenta").value="",this.toastr.error("Ocurrio un error al cargar el archivo")}},{key:"Sube",value:function(){this.General.Cliente.MotivoActualizacion="",0==this.General.Cliente.Cargado?(this.uploadResponse={status:"",message:0,filePath:""},document.getElementById("fileUploadCuenta").click()):(this.modalReference=this.modalService.open(this.popUpRecarga,{size:"lg"}),this.ref.markForCheck())}},{key:"AceptaCarga",value:function(){null==this.General.Cliente.MotivoActualizacion||this.General.Cliente.MotivoActualizacion.length<5?this.openSnackBar("Motivo no v\xe1lido","Cerrar"):(this.modalReference.close(),this.uploadResponse={status:"",message:0,filePath:""},document.getElementById("fileUploadCuenta").click())}},{key:"Regresar",value:function(e){this.VistaPrincipal.emit(e)}},{key:"ProcesarArchivo",value:function(){var e=this;if(this.General.IdFile){this.General.Cliente.Cargado=1;var t={};t.InitProcess=this.General.IdFile,t.Reference=this.General.Cliente.Reference,this.OpinionCumplimientoService.ProcesaArchivoPDF(t).then(function(t){switch(t.Result){case 0:e.toastr.error("Se detect\xf3 un RFC incorrecto por favor valide su archivo.");break;case 3e3:e.toastr.error(t.Message)}},function(e){console.log("Ocurrio un error")})}}},{key:"handleError",value:function(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}}]),e}()).\u0275fac=function(e){return new(e||ve)(X.Qb(L.a),X.Qb(Y.a),X.Qb(ee.b),X.Qb(K.c),X.Qb(b.h),X.Qb(te.b),X.Qb(Z.y),X.Qb(oe),X.Qb(se),X.Qb(X.i))},ve.\u0275cmp=X.Kb({type:ve,selectors:[["kt-cargaoponioncumplimiento"]],viewQuery:function(e,t){var i;1&e&&(X.Gc(be,!0),X.Gc(de,!0),X.Gc(ue,!0)),2&e&&(X.xc(i=X.hc())&&(t.paginator7=i.first),X.xc(i=X.hc())&&(t.sort7=i.first),X.xc(i=X.hc())&&(t.popUpRecarga=i.first))},outputs:{VistaPrincipal:"VistaPrincipal"},decls:33,vars:5,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[4,"ngIf"],[1,"row",3,"hidden"],[1,"col-xs-12","col-md-4"],[1,"col-xs-12","col-md-6"],[1,"row","mt-10"],["id","divOficiosUpLoad",2,"cursor","pointer",3,"click"],[1,"fa","fa-cloud-upload-alt",2,"font-size","40px","margin-top","28px","color","#54637A"],[2,"font-size","11px","font-family","Verdana"],[2,"float","left","width","60%"],[2,"margin-top","-7px"],["type","file","id","fileUploadCuenta",2,"display","none",3,"change"],["class","col-md-8",4,"ngIf"],["class","row",4,"ngIf"],["popCCliente",""],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[1,"row"],[1,"col-md-12"],[2,"color","#7AB800 !important"],[1,"fa","fa-user"],[1,"col-md-5"],[1,"form-group"],["type","text","aria-describedby","helpEmpresa",1,"form-control","form-control-sm"],[1,"col-md-2"],[1,"d-flex","align-items-center","p-2"],["href","javascript:;",1,"btn","btn-transparent-danger","font-weight-bold","mr-2",3,"click"],[1,"col-md-8"],[1,"progress"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",3,"ngStyle"],[1,"col-md-6"],["role","alert",1,"alert","alert-success","mb-5","p-5"],[1,"alert-heading"],[1,"border-bottom","border-white","opacity-20","mb-5"],[1,"mb-0"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"text-muted"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["maxlength","250","cols","6","rows","3",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(X.Wb(0,"div",0),X.Wb(1,"div",1),X.Wb(2,"div",2),X.Wb(3,"h2",3),X.Rb(4,"i",4),X.Nc(5," Registro de Opini\xf3n de Cumplimiento "),X.Vb(),X.Vb(),X.Vb(),X.Wb(6,"div",5),X.Lc(7,he,25,2,"div",6),X.Wb(8,"div",7),X.Rb(9,"div",8),X.Wb(10,"div",9),X.Wb(11,"div",10),X.Wb(12,"div",11),X.gc("click",function(){return t.Sube()}),X.Rb(13,"i",12),X.Wb(14,"p",13),X.Nc(15,"Agregar Archivo"),X.Vb(),X.Vb(),X.Wb(16,"div",14),X.Rb(17,"br"),X.Rb(18,"br"),X.Wb(19,"p"),X.Nc(20," Los formatos de archivos aceptados son: "),X.Vb(),X.Wb(21,"ul",15),X.Wb(22,"li"),X.Nc(23,"PDF (.pdf) m\xe1ximo 1MB"),X.Vb(),X.Vb(),X.Vb(),X.Wb(24,"input",16),X.gc("change",function(e){return t.UpLoadFile(e)}),X.Vb(),X.Lc(25,me,4,3,"div",17),X.Vb(),X.Vb(),X.Vb(),X.Lc(26,fe,13,0,"div",18),X.Vb(),X.Vb(),X.Wb(27,"div"),X.Lc(28,ge,24,1,"ng-template",null,19,X.Mc),X.Vb(),X.Wb(30,"ngx-spinner",20),X.Wb(31,"p",21),X.Nc(32," Loading... "),X.Vb(),X.Vb()),2&e&&(X.Cb(7),X.qc("ngIf",t.Page.ShowRegistro),X.Cb(1),X.qc("hidden",!t.Page.ShowUpload),X.Cb(17),X.qc("ngIf",t.Avance.message),X.Cb(1),X.qc("ngIf",t.Page.ShowCargaExitosa),X.Cb(4),X.qc("fullScreen",!0))},directives:[s.n,K.a,s.o,d.d,d.k,d.o,d.r],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}"],changeDetection:0}),ve),Se=["sharecmp"],Ve=["matPaginator7"],We=["sort7"];function ke(e,t){if(1&e&&(X.Wb(0,"option",17),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.qc("value",i.Reference),X.Cb(1),X.Pc(" ",i.RazonSocial," ")}}function we(e,t){if(1&e){var i=X.Xb();X.Wb(0,"div",4),X.Wb(1,"div",5),X.Wb(2,"div",6),X.Wb(3,"h2",7),X.Rb(4,"i",8),X.Nc(5," Selecci\xf3n de Empresa "),X.Vb(),X.Vb(),X.Vb(),X.Wb(6,"div",9),X.Wb(7,"div"),X.Wb(8,"div",10),X.Wb(9,"div",11),X.Wb(10,"div",12),X.Wb(11,"label"),X.Nc(12,"Seleccione la empresa a la que desea enviar su oponion de cumplimiento"),X.Vb(),X.Wb(13,"select",13),X.gc("ngModelChange",function(e){return X.Bc(i),X.kc().General.SeleccionEmpresa.Reference=e}),X.Lc(14,ke,2,2,"option",14),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Wb(15,"div",10),X.Wb(16,"div",15),X.Wb(17,"a",16),X.gc("click",function(){return X.Bc(i),X.kc().SeleccionarEmpresa()}),X.Nc(18,"Aceptar"),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Vb()}if(2&e){var a=X.kc();X.Cb(13),X.qc("ngModel",a.General.SeleccionEmpresa.Reference)("value",0),X.Cb(1),X.qc("ngForOf",a.ListaEmpresas)}}function ye(e,t){if(1&e){var i=X.Xb();X.Wb(0,"button",38),X.gc("click",function(){return X.Bc(i),X.kc(2).ShowLoad()}),X.Rb(1,"i",39),X.Nc(2," Cargar Opini\xf3n "),X.Vb()}}function Pe(e,t){if(1&e){var i=X.Xb();X.Wb(0,"button",38),X.gc("click",function(){return X.Bc(i),X.kc(2).CargaDatos()}),X.Rb(1,"i",40),X.Nc(2," Actualizar Estatus "),X.Vb()}}function De(e,t){1&e&&(X.Wb(0,"mat-header-cell",41),X.Nc(1,"Archivos Cargados"),X.Vb())}function Re(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.Actualizaciones," ")}}function Fe(e,t){1&e&&(X.Wb(0,"mat-header-cell",41),X.Nc(1," Mes "),X.Vb())}function Oe(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.Mes," ")}}function xe(e,t){1&e&&(X.Wb(0,"mat-header-cell",41),X.Nc(1," Estatus "),X.Vb())}function Le(e,t){if(1&e&&(X.Wb(0,"div"),X.Wb(1,"span",44),X.Nc(2),X.Vb(),X.Vb()),2&e){var i=X.kc().$implicit;X.Cb(2),X.Pc(" ",i.Estatus,"")}}function Ne(e,t){if(1&e&&(X.Wb(0,"div"),X.Wb(1,"span",45),X.Nc(2),X.Vb(),X.Vb()),2&e){var i=X.kc().$implicit;X.Cb(2),X.Pc(" ",i.Estatus,"")}}function Ee(e,t){if(1&e&&(X.Wb(0,"div"),X.Wb(1,"span",46),X.Nc(2),X.Vb(),X.Vb()),2&e){var i=X.kc().$implicit;X.Cb(2),X.Pc(" ",i.Estatus,"")}}function Ge(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Wb(1,"div",42),X.Lc(2,Le,3,1,"div",43),X.Lc(3,Ne,3,1,"div",43),X.Lc(4,Ee,3,1,"div",43),X.Vb(),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.qc("ngSwitch",i.Estatus),X.Cb(1),X.qc("ngSwitchCase","Rechazado"),X.Cb(1),X.qc("ngSwitchCase","Pendiente Revisi\xf3n"),X.Cb(1),X.qc("ngSwitchCase","Recibida")}}function Ae(e,t){1&e&&X.Rb(0,"mat-header-row")}function Me(e,t){1&e&&X.Rb(0,"mat-row")}var qe=function(){return[25,50,75,100]};function ze(e,t){if(1&e){var i=X.Xb();X.Wb(0,"div",4),X.Wb(1,"div",10),X.Wb(2,"div",18),X.Wb(3,"h1",19),X.Nc(4),X.Rb(5,"i",20),X.Vb(),X.Vb(),X.Wb(6,"span",21),X.Nc(7,"Registro de Opinion de Cumplimiento"),X.Vb(),X.Vb(),X.Wb(8,"div",9),X.Wb(9,"div",10),X.Lc(10,ye,3,0,"button",22),X.Nc(11,"\xa0 "),X.Lc(12,Pe,3,0,"button",22),X.Nc(13,"\xa0 "),X.Vb(),X.Wb(14,"div",10),X.Wb(15,"div",23),X.Rb(16,"br"),X.Wb(17,"div",24),X.Wb(18,"mat-form-field"),X.Wb(19,"input",25),X.gc("keyup",function(e){return X.Bc(i),X.kc().applyFilter7(e.target.value)}),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Wb(20,"div",26),X.Rb(21,"mat-paginator",27,28),X.Wb(23,"mat-table",29,30),X.Ub(25,31),X.Lc(26,De,2,0,"mat-header-cell",32),X.Lc(27,Re,2,1,"mat-cell",33),X.Tb(),X.Ub(28,34),X.Lc(29,Fe,2,0,"mat-header-cell",32),X.Lc(30,Oe,2,1,"mat-cell",33),X.Tb(),X.Ub(31,35),X.Lc(32,xe,2,0,"mat-header-cell",32),X.Lc(33,Ge,5,4,"mat-cell",33),X.Tb(),X.Lc(34,Ae,1,0,"mat-header-row",36),X.Lc(35,Me,1,0,"mat-row",37),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Vb()}if(2&e){var a=X.kc();X.Cb(4),X.Pc(" ",a.General.DatosEmpresa.RazonSocial," "),X.Cb(6),X.qc("ngIf",a.Screen.Post),X.Cb(2),X.qc("ngIf",a.Screen.Post),X.Cb(9),X.qc("pageSizeOptions",X.tc(7,qe)),X.Cb(2),X.qc("dataSource",a.dataSourceSolicitudes),X.Cb(11),X.qc("matHeaderRowDef",a.displayedColumns7),X.Cb(1),X.qc("matRowDefColumns",a.displayedColumns7)}}function Ie(e,t){if(1&e){var i=X.Xb();X.Wb(0,"div"),X.Wb(1,"kt-cargaoponioncumplimiento",47,48),X.gc("VistaPrincipal",function(e){return X.Bc(i),X.kc().ShowVistaPrincipal(e)}),X.Vb(),X.Vb()}}var Be,Ue,Te=((Be=function(){function e(t,a,n,o,r,c,l,s,b,d,u){i(this,e),this.snackBar=t,this.AuthService=a,this.modalService=n,this.toastr=o,this.spinnerService=r,this.router=c,this.sanitizer=l,this.ScreenActionsService=s,this.DashboardService=b,this.ref=d,this.OpinionCumplimientoService=u,this.Page={},this.Screen={},this.General={},this.ListaEmpresas=[],this.displayedColumns7=["Actualizaciones","Mes","Estatus"],this.Page.ShowLoad=!1,this.Page.ShowEdit=!1,this.Page.ShowList=!1,this.Page.ShowSeleccionEmpresa=!1,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.DatosEmpresa={},this.General.SeleccionEmpresa={}}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.ScreenActionsService.PromiseAcciones(this.Page.Controller).then(function(t){e.Screen=t,0!=Object.keys(e.Screen).length&&e.Screen.Get?0==Object.keys(e.DashboardService.oEmpresa).length&&e.DashboardService.oListaEmpresas.length>0?(e.ListaEmpresas=JSON.parse(JSON.stringify(e.DashboardService.oListaEmpresas)),e.Page.ShowSeleccionEmpresa=!0,e.ref.markForCheck()):Object.keys(e.DashboardService.oEmpresa).length>0&&e.DashboardService.oListaEmpresas.length>0?(e.General.DatosEmpresa=e.DashboardService.oEmpresa,e.OpinionCumplimientoService.oDetalleCliente=e.DashboardService.oEmpresa,e.CargaDatos(),e.Page.ShowList=!0):(e.router.navigate(["/dashboard"]),e.Regresar()):(e.toastr.error("Si intenta acceder a una opci\xf3n no permitida su cuenta ser\xe1 suspendida"),e.router.navigate(["dashboard"]))},function(t){e.handleError(t)})}},{key:"CargaCliente",value:function(){}},{key:"CargaDatos",value:function(){var e=this;if(this.spinnerService.show(),this.dataSourceSolicitudes=new N.k([]),null==this.General.DatosEmpresa||null==this.General.DatosEmpresa.Reference||""==this.General.DatosEmpresa.Reference)return this.toastr.error("Ocurri\xf3 un error al contactar el servidor"),void this.router.navigate(["/dashboard"]);var t={};t.RFC=this.General.DatosEmpresa.RFC,t.Reference=this.General.DatosEmpresa.Reference,this.OpinionCumplimientoService.GetOpinionPreveedor(t).subscribe(function(t){e.dataSourceSolicitudes=new N.k(t),e.dataSourceSolicitudes.paginator=e.paginator7,e.dataSourceSolicitudes.sort=e.sort7,e.spinnerService.hide(),e.ref.markForCheck()},function(t){e.handleError(t)})}},{key:"ShowLoad",value:function(){this.Page.ShowLoad=!0,this.Page.ShowList=!1}},{key:"ShowVistaPrincipal",value:function(e){this.CargaCliente(),this.Page.ShowLoad=!1,this.Page.ShowList=e,this.CargaDatos()}},{key:"ActualizarBandeja",value:function(){this.CargaDatos()}},{key:"applyFilter7",value:function(e){this.dataSourceSolicitudes.filter=e.trim().toLowerCase(),this.dataSourceSolicitudes.paginator&&this.dataSourceSolicitudes.paginator.firstPage()}},{key:"Regresar",value:function(){}},{key:"SeleccionarEmpresa",value:function(){var e=this;if(null!=this.General.SeleccionEmpresa.Reference&&""!=this.General.SeleccionEmpresa.Reference){var t=this.ListaEmpresas.find(function(t){return t.Reference===e.General.SeleccionEmpresa.Reference});null!=t&&null!=t?(this.General.DatosEmpresa.RazonSocial=t.RazonSocial,this.General.DatosEmpresa.Reference=t.Reference,this.CargaDatos(),this.Page.ShowSeleccionEmpresa=!1,this.OpinionCumplimientoService.oDetalleCliente.Reference=t.Reference,this.OpinionCumplimientoService.oDetalleCliente.RFC=t.RFC,this.OpinionCumplimientoService.oDetalleCliente.NombreCliente=t.Cliente,this.OpinionCumplimientoService.oDetalleCliente.Cargado=t.Cargado,this.Page.ShowList=!0,this.ref.markForCheck()):this.toastr.error("selecci\xf3n no v\xe1lida")}else this.toastr.error("Debe seleccionar una empresa")}},{key:"handleError",value:function(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}}]),e}()).\u0275fac=function(e){return new(e||Be)(X.Qb(L.a),X.Qb(Y.a),X.Qb(Z.y),X.Qb(ee.b),X.Qb(K.c),X.Qb(b.h),X.Qb(te.b),X.Qb(ie.a),X.Qb(ae.a),X.Qb(X.i),X.Qb(oe))},Be.\u0275cmp=X.Kb({type:Be,selectors:[["kt-bandejaopinion"]],viewQuery:function(e,t){var i;1&e&&(X.Gc(Se,!0),X.Gc(Ve,!0),X.Gc(We,!0)),2&e&&(X.xc(i=X.hc())&&(t.sharecmp=i.first),X.xc(i=X.hc())&&(t.paginator7=i.first),X.xc(i=X.hc())&&(t.sort7=i.first))},decls:6,vars:4,consts:[["class","card card-custom",4,"ngIf"],[4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["name","select",1,"form-control",3,"ngModel","value","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","p-2"],["href","javascript:;",1,"btn","btn-transparent-success","font-weight-bold","mr-2",3,"click"],[3,"value"],[1,"col-xs-12","col-md-12","mt-10"],[1,"d-flex","align-items-center","text-dark","text-hover-primary","font-size-h5","font-weight-bold","ml-5"],[1,"flaticon2-correct","text-success","icon-md","ml-2"],[1,"text-muted","ml-15"],["type","button","style","color: #7AB800 !important","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"col-xs-12","col-md-12",2,"flex","0 0 0% !important"],[1,"example-header"],["matInput","","placeholder","Buscar",3,"keyup"],[1,"col-xs-12","col-md-12"],[3,"pageSizeOptions"],["matPaginator7",""],["matSort","",3,"dataSource"],["sort7","matSort"],["matColumnDef","Actualizaciones"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Mes"],["matColumnDef","Estatus"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["type","button",1,"btn","btn-outline-secondary",2,"color","#7AB800 !important",3,"click"],[1,"fas","fa-upload"],[1,"fas","fa-circle-notch"],["mat-sort-header",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"label","font-weight-bold","label-lg","label-light-danger","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-primary","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-success","label-inline"],[3,"VistaPrincipal"],["sharecmp",""]],template:function(e,t){1&e&&(X.Lc(0,we,19,3,"div",0),X.Lc(1,ze,36,8,"div",0),X.Lc(2,Ie,3,0,"div",1),X.Wb(3,"ngx-spinner",2),X.Wb(4,"p",3),X.Nc(5," Loading... "),X.Vb(),X.Vb()),2&e&&(X.qc("ngIf",t.Page.ShowSeleccionEmpresa),X.Cb(1),X.qc("ngIf",t.Page.ShowList),X.Cb(1),X.qc("ngIf",t.Page.ShowLoad),X.Cb(1),X.qc("fullScreen",!0))},directives:[s.n,K.a,d.w,d.o,d.r,s.m,d.s,d.y,W.c,V.b,I.a,N.j,T.a,N.c,N.e,N.b,N.g,N.i,N.d,T.b,N.a,s.p,s.q,N.f,N.h,Ce],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}.mat-table[_ngcontent-%COMP%]{overflow-x:scroll}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:normal;display:table-cell;padding:0 10px;line-break:unset;width:90%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{display:table-row}"],changeDetection:0}),Be),Qe=n("wl6q"),je=((Ue=function(){function e(t,a,n){i(this,e),this.api=t,this.router=a,this.http=n,this.oDetalleSolicitud={}}return t(e,[{key:"download",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.http.get("".concat(ce.a.apiUrl,"/").concat(e,"/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token},responseType:"blob"}).toPromise()}},{key:"downloadPost",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.http.post("".concat(ce.a.apiUrl,"/").concat(e,"/"),t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token},responseType:"blob"}).toPromise()}}]),e}()).\u0275fac=function(e){return new(e||Ue)(X.dc(ne.a),X.dc(b.h),X.dc(re.b))},Ue.\u0275prov=X.Mb({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue),$e=["sharecmp"],_e=["matPaginator7"],Xe=["sort7"];function He(e,t){if(1&e&&(X.Wb(0,"option",57),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.qc("value",i.Valor),X.Cb(1),X.Pc(" ",i.Descripcion," ")}}function Je(e,t){1&e&&(X.Wb(0,"mat-header-cell"),X.Nc(1," Actions "),X.Vb())}function Ke(e,t){if(1&e){var i=X.Xb();X.Wb(0,"mat-cell"),X.Wb(1,"a",58),X.gc("click",function(){X.Bc(i);var e=t.$implicit;return X.kc().DescargarOpinion(e)}),X.Rb(2,"i",59),X.Vb(),X.Vb()}}function Ye(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1,"Verifica Datos"),X.Vb())}function Ze(e,t){if(1&e){var i=X.Xb();X.Wb(0,"mat-cell"),X.Wb(1,"span",61),X.gc("click",function(){X.Bc(i);var e=t.$implicit;return X.kc().VerificaSAT(e)}),X.Nc(2," Validar "),X.Vb(),X.Vb()}}function et(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," Validacion Documento "),X.Vb())}function tt(e,t){if(1&e&&(X.Wb(0,"div"),X.Wb(1,"span",64),X.Nc(2),X.Vb(),X.Vb()),2&e){var i=X.kc().$implicit;X.Cb(2),X.Pc(" ",i.StatusValidacion,"")}}function it(e,t){if(1&e&&(X.Wb(0,"div"),X.Wb(1,"span",65),X.Nc(2),X.Vb(),X.Vb()),2&e){var i=X.kc().$implicit;X.Cb(2),X.Pc(" ",i.StatusValidacion,"")}}function at(e,t){if(1&e&&(X.Wb(0,"div"),X.Wb(1,"span",66),X.Nc(2),X.Vb(),X.Vb()),2&e){var i=X.kc().$implicit;X.Cb(2),X.Pc(" ",i.StatusValidacion,"")}}function nt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Wb(1,"div",62),X.Lc(2,tt,3,1,"div",63),X.Lc(3,it,3,1,"div",63),X.Lc(4,at,3,1,"div",63),X.Vb(),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.qc("ngSwitch",i.StatusValidacion),X.Cb(1),X.qc("ngSwitchCase","Sin posibles ediciones"),X.Cb(1),X.qc("ngSwitchCase","Documento Editado"),X.Cb(1),X.qc("ngSwitchCase","Posiblemente Editado")}}function ot(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1,"Etiqueta"),X.Vb())}function rt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Wb(1,"span",67),X.Nc(2),X.Vb(),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Hc("background-color:"+i.Color),X.Cb(1),X.Pc(" ",i.Etiqueta," ")}}function ct(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1,"Fecha Documento"),X.Vb())}function lt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.lc(2,"date"),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",X.nc(2,1,i.FechaDocumento,"yyyy-MM-dd")," ")}}function st(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," RFC "),X.Vb())}function bt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.RFC," ")}}function dt(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," Opinion "),X.Vb())}function ut(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.Opinion," ")}}function ht(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," Razon Social "),X.Vb())}function pt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.RazonSocial," ")}}function mt(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," Fecha Consulta Documento SAT "),X.Vb())}function ft(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.FechaConsulta," ")}}function gt(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," Fecha Carga Documento "),X.Vb())}function vt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.lc(2,"date"),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",X.nc(2,1,i.FechaCargaDocumento,"yyyy-MM-dd @ HH:mm")," ")}}function Ct(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," Folio "),X.Vb())}function St(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.Folio," ")}}function Vt(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," Cadena Original "),X.Vb())}function Wt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.CadenaOriginal," ")}}function kt(e,t){1&e&&(X.Wb(0,"mat-header-cell",60),X.Nc(1," SelloDigital "),X.Vb())}function wt(e,t){if(1&e&&(X.Wb(0,"mat-cell"),X.Nc(1),X.Vb()),2&e){var i=t.$implicit;X.Cb(1),X.Pc(" ",i.SelloDigital," ")}}function yt(e,t){1&e&&X.Rb(0,"mat-header-row")}function Pt(e,t){1&e&&X.Rb(0,"mat-row")}function Dt(e,t){if(1&e){var i=X.Xb();X.Wb(0,"div"),X.Wb(1,"kt-cargaoponioncumplimiento",68,69),X.gc("VistaPrincipal",function(e){return X.Bc(i),X.kc().ShowVistaPrincipal(e)}),X.Vb(),X.Vb()}}var Rt,Ft,Ot=function(){return[25,50,75,100]},xt=[{path:"",component:H,children:[{path:"operations/verdict",component:Te},{path:"operations/vendorsreview",component:(Rt=function(){function e(t,a,n,o,r,c,l,s,b,d,u,h){i(this,e),this.snackBar=t,this.AuthService=a,this.modalService=n,this.toastr=o,this.spinnerService=r,this.router=c,this.sanitizer=l,this.ScreenActionsService=s,this.ExcelService=b,this.ref=d,this.OpinionCumplimientoService=u,this.DownloadService=h,this.Page={},this.Screen={},this.General={},this.panelOpenState=!1,this.ListaTipoOpinion=[],this.displayedColumns7=["actions","Validacion","StatusValidacion","Etiqueta","FechaDocumento","RFC","Opinion","RazonSocial","FechaConsulta","FechaCargaDocumento","Folio","CadenaOriginal","SelloDigital"],this.Page.ShowLoad=!1,this.Page.ShowRechazo=!1,this.Page.ShowEdit=!1,this.Page.ShowList=!1,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Filtros={},this.ListaTipoOpinion.push({Valor:1,Descripcion:"Negativo"},{Valor:2,Descripcion:"Positivo"},{Valor:3,Descripcion:"Todas"}),this.General.Data=[]}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.ScreenActionsService.PromiseAcciones(this.Page.Controller).then(function(t){e.Screen=t,0!=Object.keys(e.Screen).length&&e.Screen.Get?(e.ref.markForCheck(),e.CargaDatos()):(e.toastr.error("Si intenta acceder a una opci\xf3n no permitida su cuenta ser\xe1 suspendida"),e.router.navigate(["dashboard"]))},function(t){e.handleError(t)})}},{key:"CargaDatos",value:function(){var e=this;this.Page.ShowList=!0,this.General.Data.length=0,this.spinnerService.show(),this.dataSourceSolicitudes=new N.k([]),this.OpinionCumplimientoService.GetRevisionOpiniones().subscribe(function(t){e.General.Data=t,e.dataSourceSolicitudes=new N.k(t),e.dataSourceSolicitudes.paginator=e.paginator7,e.dataSourceSolicitudes.sort=e.sort7,e.spinnerService.hide(),e.ref.markForCheck()},function(t){e.handleError(t)})}},{key:"AplicaFiltros",value:function(){var e=this;0!=Object.keys(this.General.Filtros).length?null==this.General.Filtros.FechaFinal||null==this.General.Filtros.FechaFinal||""==this.General.Filtros.FechaFinal||null!=this.General.Filtros.FechaInicial&&(null!=this.General.Filtros.FechaInicial||""!=this.General.Filtros.FechaInicial)?(this.General.Data.length=0,this.OpinionCumplimientoService.AplicaFiltros(this.General.Filtros).subscribe(function(t){e.General.Data=t,e.dataSourceSolicitudes=new N.k(t),e.dataSourceSolicitudes.paginator=e.paginator7,e.dataSourceSolicitudes.sort=e.sort7,e.spinnerService.hide(),e.ref.markForCheck()},function(t){e.handleError(t)})):this.toastr.error("Debe seleccionar la fecha inicial"):this.toastr.error("Filtros no v\xe1lidos","Error")}},{key:"Exportar",value:function(){var e=this.General.Data.map(function(e){return{FechaDocumento:e.FechaDocumento,StatusValidacion:e.StatusValidacion,Etiqueta:e.Etiqueta,RFC:e.RFC,Folio:e.Folio,RazonSocial:e.RazonSocial,Opinion:e.Opinion,FechaConsulta:e.FechaConsulta,CadenaOriginal:e.CadenaOriginal,SelloDigital:e.SelloDigital,FechaCargaDocumento:e.FechaCargaDocumento}});this.spinnerService.show(),this.ExcelService.exportAsExcelFile(e,"OpinionProveedores"),this.spinnerService.hide()}},{key:"ResetData",value:function(){this.CargaDatos()}},{key:"ShowLoad",value:function(){this.Page.ShowLoad=!0,this.Page.ShowList=!1}},{key:"ShowVistaPrincipal",value:function(e){this.Page.ShowLoad=!1,this.Page.ShowRechazo=!1,this.Page.ShowList=e,this.CargaDatos()}},{key:"ActualizarBandeja",value:function(){this.CargaDatos()}},{key:"DescargarOpinion",value:function(e){var t=this,i={};i.Value=e.Value,i.RFC=e.RFC,this.spinnerService.show(),this.DownloadService.downloadPost("report/vendorverdict",i).then(function(e){var a=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.target="_blank",o.download="OpinionCumplimiento_"+i.RFC+".pdf",document.body.appendChild(o),o.click(),t.spinnerService.hide()},function(e){t.toastr.error("Ocurrio un error al descargar la infomaci\xf3n"),t.spinnerService.hide()})}},{key:"VerificaSAT",value:function(e){var t,i,a,n=new Date(e.FechaDocumento),o=n.getDate(),r=n.getMonth()+1,c=n.getFullYear();a=r<10?"0"+r:r.toString(),i=o<10?"0"+o:o.toString(),t="https://siat.sat.gob.mx/app/qr/faces/pages/mobile/validadorqr.jsf?D1=1&D2=1&D3="+"".concat(e.Folio,"_").concat(e.RFC,"_").concat(i,"-").concat(a,"-").concat(c,"_").concat(e.Digito),window.open("about:blank","_blank").location.href=t}},{key:"applyFilter7",value:function(e){this.dataSourceSolicitudes.filter=e.trim().toLowerCase(),this.dataSourceSolicitudes.paginator&&this.dataSourceSolicitudes.paginator.firstPage()}},{key:"handleError",value:function(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}}]),e}(),Rt.\u0275fac=function(e){return new(e||Rt)(X.Qb(L.a),X.Qb(Y.a),X.Qb(Z.y),X.Qb(ee.b),X.Qb(K.c),X.Qb(b.h),X.Qb(te.b),X.Qb(ie.a),X.Qb(Qe.a),X.Qb(X.i),X.Qb(oe),X.Qb(je))},Rt.\u0275cmp=X.Kb({type:Rt,selectors:[["kt-bandejarevisionopinion"]],viewQuery:function(e,t){var i;1&e&&(X.Gc($e,!0),X.Gc(_e,!0),X.Gc(Xe,!0)),2&e&&(X.xc(i=X.hc())&&(t.sharecmp=i.first),X.xc(i=X.hc())&&(t.paginator7=i.first),X.xc(i=X.hc())&&(t.sort7=i.first))},decls:117,vars:16,consts:[[1,"card","card-custom",3,"hidden"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[1,"row"],[1,"col-xs-12","col-md-12"],[3,"expanded","expandedChange"],[1,"Oferta",2,"font-weight","bold"],[1,"fas","fa-filter"],[1,"col-xs-12","col-md-2"],[1,"form-group"],["type","text","maxlength","13","aria-describedby","helpRFCCliente","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-xs-12","col-md-3"],["type","text","maxlength","50","aria-describedby","helpRazonSocial","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["required","","name","select","name","ddlTipoBusqueda",1,"form-control","form-control-sm",3,"value","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date","maxlength","4","aria-describedby","FechaInicialhelp","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","date","maxlength","4","aria-describedby","FechaFinalhelp","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-md-1"],["type","reset","name","edit",1,"btn","btn-success","btn-sm",2,"margin-top","25px",3,"click"],[1,"fas","fa-search"],["href","javascript:void(0)",1,"btn","btn-danger","btn-sm",2,"margin-top","25px",3,"click"],[1,"far","fa-times-circle"],[1,"col-xs-12","col-md-9"],[1,"col-xs-12","col-md-3","text-right"],["type","button","data-toggle","tooltip","title","Exportar datos a Excel",1,"btn","btn-outline-secondary",2,"color","#7AB800 !important",3,"click"],[1,"fas","fa-file-excel"],[1,"col-xs-12","col-md-12",2,"flex","0 0 0% !important"],[1,"example-header"],["matInput","","placeholder","Buscar",3,"keyup"],[3,"pageSizeOptions"],["matPaginator7",""],["matSort","",3,"dataSource"],["sort7","matSort"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Validacion"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","StatusValidacion"],["matColumnDef","Etiqueta"],["matColumnDef","FechaDocumento"],["matColumnDef","RFC"],["matColumnDef","Opinion"],["matColumnDef","RazonSocial"],["matColumnDef","FechaConsulta"],["matColumnDef","FechaCargaDocumento"],["matColumnDef","Folio"],["matColumnDef","CadenaOriginal"],["matColumnDef","SelloDigital"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[3,"value"],["href","javascript:;","title","Descargar Opinion de Cumplimiento",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-primary","btn-icon",3,"click"],[1,"fas","fa-cloud-download-alt"],["mat-sort-header",""],["data-toggle","tooltip","title","Consultar datos en SAT",1,"text-muted",2,"text-decoration","underline","cursor","pointer",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"label","font-weight-bold","label-lg","label-light-success","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-danger","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-warning","label-inline"],[2,"color","#fff","border-radius","2px","padding","3px","font-size","12px"],[3,"VistaPrincipal"],["sharecmp",""]],template:function(e,t){1&e&&(X.Wb(0,"div",0),X.Wb(1,"div",1),X.Wb(2,"div",2),X.Wb(3,"h2",3),X.Rb(4,"i",4),X.Nc(5," Revisi\xf3n de opinion de cumplimiento para proveedores"),X.Vb(),X.Vb(),X.Vb(),X.Wb(6,"div",5),X.Wb(7,"div",6),X.Wb(8,"div",7),X.Wb(9,"mat-expansion-panel",8),X.gc("expandedChange",function(e){return t.panelOpenState=e}),X.Wb(10,"mat-expansion-panel-header"),X.Wb(11,"mat-panel-title"),X.Wb(12,"span",9),X.Rb(13,"i",10),X.Nc(14," B\xfasqueda Avanzada"),X.Vb(),X.Vb(),X.Vb(),X.Wb(15,"div",6),X.Wb(16,"div",11),X.Wb(17,"div",12),X.Wb(18,"label"),X.Nc(19,"RFC "),X.Vb(),X.Wb(20,"input",13),X.gc("ngModelChange",function(e){return t.General.Filtros.RFCCliente=e}),X.Vb(),X.Vb(),X.Vb(),X.Wb(21,"div",14),X.Wb(22,"div",12),X.Wb(23,"label"),X.Nc(24,"Raz\xf3n Social "),X.Vb(),X.Wb(25,"input",15),X.gc("ngModelChange",function(e){return t.General.Filtros.RazonSocial=e}),X.Vb(),X.Vb(),X.Vb(),X.Wb(26,"div",11),X.Wb(27,"div",12),X.Wb(28,"label"),X.Nc(29,"Tipo"),X.Vb(),X.Wb(30,"select",16),X.gc("ngModelChange",function(e){return t.General.Filtros.TipoOpinion=e}),X.Lc(31,He,2,2,"option",17),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Wb(32,"div",6),X.Wb(33,"div",11),X.Wb(34,"div",12),X.Wb(35,"label"),X.Nc(36,"Fecha Documento Inicial"),X.Vb(),X.Wb(37,"input",18),X.gc("ngModelChange",function(e){return t.General.Filtros.FechaInicial=e}),X.Vb(),X.Vb(),X.Vb(),X.Wb(38,"div",11),X.Wb(39,"div",12),X.Wb(40,"label"),X.Nc(41,"Fecha Documento Final"),X.Vb(),X.Wb(42,"input",19),X.gc("ngModelChange",function(e){return t.General.Filtros.FechaFinal=e}),X.Vb(),X.Vb(),X.Vb(),X.Wb(43,"div",20),X.Wb(44,"div",12),X.Wb(45,"button",21),X.gc("click",function(){return t.AplicaFiltros()}),X.Rb(46,"i",22),X.Nc(47," Buscar "),X.Vb(),X.Vb(),X.Vb(),X.Wb(48,"div",20),X.Wb(49,"div",12),X.Wb(50,"a",23),X.gc("click",function(){return t.ResetData()}),X.Rb(51,"i",24),X.Nc(52," Limpiar"),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Rb(53,"br"),X.Vb(),X.Vb(),X.Vb(),X.Wb(54,"div",6),X.Rb(55,"div",25),X.Wb(56,"div",26),X.Rb(57,"br"),X.Wb(58,"button",27),X.gc("click",function(){return t.Exportar()}),X.Rb(59,"i",28),X.Nc(60," Exportar"),X.Vb(),X.Vb(),X.Vb(),X.Wb(61,"div",6),X.Wb(62,"div",29),X.Rb(63,"br"),X.Wb(64,"div",30),X.Wb(65,"mat-form-field"),X.Wb(66,"input",31),X.gc("keyup",function(e){return t.applyFilter7(e.target.value)}),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Wb(67,"div",7),X.Rb(68,"mat-paginator",32,33),X.Wb(70,"mat-table",34,35),X.Ub(72,36),X.Lc(73,Je,2,0,"mat-header-cell",37),X.Lc(74,Ke,3,0,"mat-cell",38),X.Tb(),X.Ub(75,39),X.Lc(76,Ye,2,0,"mat-header-cell",40),X.Lc(77,Ze,3,0,"mat-cell",38),X.Tb(),X.Ub(78,41),X.Lc(79,et,2,0,"mat-header-cell",40),X.Lc(80,nt,5,4,"mat-cell",38),X.Tb(),X.Ub(81,42),X.Lc(82,ot,2,0,"mat-header-cell",40),X.Lc(83,rt,3,3,"mat-cell",38),X.Tb(),X.Ub(84,43),X.Lc(85,ct,2,0,"mat-header-cell",40),X.Lc(86,lt,3,4,"mat-cell",38),X.Tb(),X.Ub(87,44),X.Lc(88,st,2,0,"mat-header-cell",40),X.Lc(89,bt,2,1,"mat-cell",38),X.Tb(),X.Ub(90,45),X.Lc(91,dt,2,0,"mat-header-cell",40),X.Lc(92,ut,2,1,"mat-cell",38),X.Tb(),X.Ub(93,46),X.Lc(94,ht,2,0,"mat-header-cell",40),X.Lc(95,pt,2,1,"mat-cell",38),X.Tb(),X.Ub(96,47),X.Lc(97,mt,2,0,"mat-header-cell",40),X.Lc(98,ft,2,1,"mat-cell",38),X.Tb(),X.Ub(99,48),X.Lc(100,gt,2,0,"mat-header-cell",40),X.Lc(101,vt,3,4,"mat-cell",38),X.Tb(),X.Ub(102,49),X.Lc(103,Ct,2,0,"mat-header-cell",40),X.Lc(104,St,2,1,"mat-cell",38),X.Tb(),X.Ub(105,50),X.Lc(106,Vt,2,0,"mat-header-cell",40),X.Lc(107,Wt,2,1,"mat-cell",38),X.Tb(),X.Ub(108,51),X.Lc(109,kt,2,0,"mat-header-cell",40),X.Lc(110,wt,2,1,"mat-cell",38),X.Tb(),X.Lc(111,yt,1,0,"mat-header-row",52),X.Lc(112,Pt,1,0,"mat-row",53),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Vb(),X.Lc(113,Dt,3,0,"div",54),X.Wb(114,"ngx-spinner",55),X.Wb(115,"p",56),X.Nc(116," Loading... "),X.Vb(),X.Vb()),2&e&&(X.qc("hidden",!t.Page.ShowList),X.Cb(9),X.qc("expanded",t.panelOpenState),X.Cb(11),X.qc("ngModel",t.General.Filtros.RFCCliente),X.Cb(5),X.qc("ngModel",t.General.Filtros.RazonSocial),X.Cb(5),X.qc("value",0)("ngModel",t.General.Filtros.TipoOpinion),X.Cb(1),X.qc("ngForOf",t.ListaTipoOpinion),X.Cb(6),X.qc("ngModel",t.General.Filtros.FechaInicial),X.Cb(5),X.qc("ngModel",t.General.Filtros.FechaFinal),X.Cb(26),X.qc("pageSizeOptions",X.tc(15,Ot)),X.Cb(2),X.qc("dataSource",t.dataSourceSolicitudes),X.Cb(41),X.qc("matHeaderRowDef",t.displayedColumns7),X.Cb(1),X.qc("matRowDefColumns",t.displayedColumns7),X.Cb(1),X.qc("ngIf",t.Page.ShowLoad),X.Cb(1),X.qc("fullScreen",!0))},directives:[$.c,$.f,$.g,d.d,d.k,d.o,d.r,d.w,d.v,s.m,W.c,V.b,I.a,N.j,T.a,N.c,N.e,N.b,N.g,N.i,s.n,K.a,d.s,d.y,N.d,N.a,T.b,s.p,s.q,N.f,N.h,Ce],pipes:[s.e],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}.mat-table[_ngcontent-%COMP%]{overflow-x:scroll}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:normal;display:table-cell;padding:0 10px;line-break:unset;width:90%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{display:table-row}.Oferta[_ngcontent-%COMP%]{font-size:11px;font-weight:400;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}"],changeDetection:0}),Rt)}]}],Lt=((Ft=function e(){i(this,e)}).\u0275mod=X.Ob({type:Ft}),Ft.\u0275inj=X.Nb({factory:function(e){return new(e||Ft)},providers:[g.c,{provide:j.d,useValue:{}},{provide:j.a,useValue:{}},{provide:m.f,useValue:"en-GB"},{provide:S.a,useValue:{useUtc:!0}}],imports:[[s.c,V.c,W.e,C.c,k.b,E.d,A.b,R.g,D.b,w.c,g.b,m.m,p.b,v.b,F.c,y.d,P.b,G.g,O.b,x.b,L.b,N.l,M.b,Q.b,j.c,$.b,_.b,T.c,U.d,B.e,I.b,f.f,m.u,u.a,l.c,z.d,q.c,h.a,J.a,K.b,d.j,d.u,b.l.forChild(xt)],b.l]}),Ft)}}])}();