(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"K4G+":function(e,t,r){"use strict";r.r(t),r.d(t,"InternalModule",function(){return Et});var i=r("QibW"),a=r("ofXK"),n=r("tyNb"),o=r("3Pt+"),c=r("WsYS"),s=r("93Pz"),l=r("1jcm"),b=r("FKr1"),d=r("0IaG"),u=r("NFeN"),h=r("bSwM"),m=r("iadO"),f=r("1yaQ"),p=r("qFsG"),g=r("kmnG"),v=r("/1cH"),C=r("bTqV"),V=r("wZkO"),W=r("Qu3c"),S=r("d3UM"),P=r("Wp6s"),w=r("STbY"),x=r("bv9b"),k=r("Xa2L"),E=r("dNgK"),N=r("+0xr"),G=r("MutI"),A=r("XhcP"),M=r("5RNC"),U=r("zkoq"),y=r("jaxi"),L=r("8yBR"),R=r("M9IT"),D=r("A5z7"),B=r("xHqg"),O=r("Dh3D"),I=r("/t3+"),q=r("2ChS"),Q=r("7EHt"),F=r("f0Cb"),_=r("fXoL");let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=_.Kb({type:e,selectors:[["kt-internal"]],decls:1,vars:0,template:function(e,t){1&e&&_.Rb(0,"router-outlet")},directives:[n.m],encapsulation:2,changeDetection:0}),e})();var T=r("QJFE"),$=r("JqCM"),X=r("PSD3"),H=r.n(X),j=r("+BVi"),K=r("1kSV"),J=r("5eHb"),Z=r("jhN1"),Y=r("ap2d");let ee=(()=>{class e{constructor(e,t){this.api=e,this.router=t}GetPerfiles(){return this.api.get("Perfil",{})}GetFolio(e){return this.api.getById("Perfil",e)}Post(e){return this.api.post("Perfil",e)}Put(e){return this.api.put("Perfil",e)}Delete(e){return this.api.delete("Perfil",e)}}return e.\u0275fac=function(t){return new(t||e)(_.dc(Y.a),_.dc(n.h))},e.\u0275prov=_.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var te=r("ptnc");const re=["matPaginator7"],ie=["sort7"];function ae(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",31),_.gc("click",function(){return _.Bc(e),_.kc().ShowAdd()}),_.Rb(1,"i",32),_.Nc(2," Nuevo "),_.Vb()}}function ne(e,t){1&e&&(_.Wb(0,"mat-header-cell",33),_.Nc(1," N\xfamero"),_.Vb())}function oe(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.index;_.Cb(1),_.Pc(" ",e+1," ")}}function ce(e,t){1&e&&(_.Wb(0,"mat-header-cell",33),_.Nc(1," Perf\xedl "),_.Vb())}function se(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Pc(" ",e.NombrePerfil," ")}}function le(e,t){1&e&&(_.Wb(0,"mat-header-cell"),_.Nc(1," Actions "),_.Vb())}function be(e,t){if(1&e){const e=_.Xb();_.Wb(0,"a",36),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().ShowEdit(t)}),_.Rb(1,"i",37),_.Vb()}}function de(e,t){if(1&e){const e=_.Xb();_.Wb(0,"a",38),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().Eliminar(t)}),_.Rb(1,"i",39),_.Vb()}}function ue(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Lc(1,be,2,0,"a",34),_.Nc(2," \xa0 \xa0 "),_.Lc(3,de,2,0,"a",35),_.Nc(4," \xa0 "),_.Vb()),2&e){const e=_.kc();_.Cb(1),_.qc("ngIf",e.Screen.Put),_.Cb(2),_.qc("ngIf",e.Screen.Delete)}}function he(e,t){1&e&&_.Rb(0,"mat-header-row")}function me(e,t){1&e&&_.Rb(0,"mat-row")}function fe(e,t){if(1&e){const e=_.Xb();_.Wb(0,"div",6),_.Rb(1,"div",40),_.Wb(2,"div",41),_.Wb(3,"div",42),_.Wb(4,"div",1),_.Wb(5,"h3",43),_.Nc(6," Nuevo Perfil "),_.Vb(),_.Vb(),_.Wb(7,"div",5),_.Wb(8,"div",6),_.Wb(9,"div",44),_.Wb(10,"label"),_.Nc(11,"Perf\xedl"),_.Vb(),_.Wb(12,"input",45),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Perfil.NombrePerfil=t}),_.Vb(),_.Vb(),_.Wb(13,"div",46),_.Wb(14,"label"),_.Nc(15,"Estatus"),_.Vb(),_.Wb(16,"label",47),_.Rb(17,"i",48),_.Nc(18," Activo"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(19,"div",49),_.Wb(20,"div",7),_.Wb(21,"button",50),_.gc("click",function(){return _.Bc(e),_.kc().Guardar()}),_.Rb(22,"i",51),_.Nc(23," Guardar"),_.Vb(),_.Wb(24,"button",52),_.gc("click",function(){return _.Bc(e),_.kc().Cancelar()}),_.Rb(25,"i",53),_.Nc(26," Cancelar"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&e){const e=_.kc();_.Cb(12),_.qc("ngModel",e.General.Perfil.NombrePerfil)}}function pe(e,t){if(1&e){const e=_.Xb();_.Wb(0,"div",6),_.Rb(1,"div",40),_.Wb(2,"div",41),_.Wb(3,"div",42),_.Wb(4,"div",1),_.Wb(5,"h3",43),_.Nc(6," Editar Perf\xedl "),_.Vb(),_.Vb(),_.Wb(7,"div",5),_.Wb(8,"div",6),_.Wb(9,"div",44),_.Wb(10,"label"),_.Nc(11,"Perf\xedl"),_.Vb(),_.Wb(12,"input",45),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Perfil.NombrePerfil=t}),_.Vb(),_.Vb(),_.Wb(13,"div",46),_.Wb(14,"label"),_.Nc(15,"Estatus"),_.Vb(),_.Wb(16,"label",47),_.Rb(17,"i",48),_.Nc(18," Activo"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(19,"div",49),_.Wb(20,"div",44),_.Wb(21,"button",50),_.gc("click",function(){return _.Bc(e),_.kc().GuardarEditar()}),_.Rb(22,"i",51),_.Nc(23," Guardar"),_.Vb(),_.Wb(24,"button",52),_.gc("click",function(){return _.Bc(e),_.kc().Cancelar()}),_.Rb(25,"i",53),_.Nc(26," Cancelar"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&e){const e=_.kc();_.Cb(12),_.qc("ngModel",e.General.Perfil.NombrePerfil)}}const ge=function(){return[25,50,100]};let ve=(()=>{class e{constructor(e,t,r,i,a,n,o,c,s){this.snackBar=e,this.AuthService=t,this.modalService=r,this.toastr=i,this.spinnerService=a,this.router=n,this.sanitizer=o,this.PerfilService=c,this.ScreenActionsService=s,this.Page={},this.Screen={},this.General={},this.displayedColumns7=["No","NombrePerfil","actions"],this.Page.ShowAdd=!1,this.Page.ShowEdit=!1,this.Page.ShowList=!0,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Perfil={}}ngOnInit(){this.ScreenActionsService.PromiseAcciones(this.Page.Controller).then(e=>{this.Screen=e,this.CargaDatos()},e=>{this.handleError(e)})}CargaDatos(){this.dataSourceFolios=new N.k([]),this.spinnerService.show(),this.PerfilService.GetPerfiles().subscribe(e=>{this.dataSourceFolios=new N.k(e),this.dataSourceFolios.paginator=this.paginator7,this.dataSourceFolios.sort=this.sort7,this.spinnerService.hide()},e=>{this.handleError(e)})}applyFilter7(e){this.dataSourceFolios.filter=e.trim().toLowerCase(),this.dataSourceFolios.paginator&&this.dataSourceFolios.paginator.firstPage()}ShowAdd(){this.General.Perfil={},this.Page.ShowAdd=!0,this.Page.ShowList=!1,this.Page.ShowEdit=!1}Cancelar(){this.Page.ShowList=!0,this.Page.ShowAdd=!1,this.Page.ShowEdit=!1}ShowEdit(e){this.General.Perfil.IdPerfil=e.IdPerfil,this.General.Perfil.NombrePerfil=e.NombrePerfil,this.Page.ShowEdit=!0,this.Page.ShowAdd=!1,this.Page.ShowList=!1}Guardar(){this.General.Perfil.NombrePerfil?this.General.Perfil.NombrePerfil.length<5?this.toastr.error("La informacion proporcionada no es v\xe1lida, favor de revisar"):this.PerfilService.Post(this.General.Perfil).subscribe(e=>{this.toastr.success("La informaci\xf3n se guard\xf3 correctamente"),this.CargaDatos(),this.Cancelar()},e=>{this.handleError(e)}):this.toastr.error("El perfil no puede estar vac\xedo, favor de revisar")}GuardarEditar(){this.General.Perfil.IdPerfil&&0!=this.General.Perfil.IdPerfil?this.General.Perfil.NombrePerfil?this.General.Perfil.NombrePerfil.length<5?this.toastr.error("La informacion proporcionada no es v\xe1lida, favor de revisar"):this.PerfilService.Put(this.General.Perfil).subscribe(e=>{this.toastr.success("La informaci\xf3n se actualiz\xf3 correctamente"),this.CargaDatos(),this.Cancelar()},e=>{this.handleError(e)}):this.toastr.error("El perfil no puede estar vac\xedo, favor de revisar"):this.toastr.error("ocurrio un error al seleccionar el  perf\xedl")}Eliminar(e){H.a.fire({title:"Confirmaci\xf3n",text:"Eliminar la informaci\xf3n del perfil: "+e.NombrePerfil,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.value&&this.GuardarEliminar(e.IdPerfil)})}GuardarEliminar(e){this.PerfilService.Delete(e).subscribe(()=>{this.toastr.success("La informaci\xf3n se elimin\xf3 correctamente"),this.Cancelar(),this.CargaDatos()},e=>{this.handleError(e)})}handleError(e){this.AuthService.handleError(e)}openSnackBar(e,t){this.snackBar.open(e,t,{duration:2e3})}}return e.\u0275fac=function(t){return new(t||e)(_.Qb(E.a),_.Qb(j.a),_.Qb(K.y),_.Qb(J.b),_.Qb($.c),_.Qb(n.h),_.Qb(Z.b),_.Qb(ee),_.Qb(te.a))},e.\u0275cmp=_.Kb({type:e,selectors:[["kt-perfiles"]],viewQuery:function(e,t){if(1&e&&(_.Gc(re,!0),_.Gc(ie,!0)),2&e){let e;_.xc(e=_.hc())&&(t.paginator7=e.first),_.xc(e=_.hc())&&(t.sort7=e.first)}},decls:41,vars:10,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[1,"row"],[1,"col-xs-12","col-md-12"],[3,"hidden"],[1,"col-xs-12","col-md-10"],[1,"col-xs-12","col-md-2","text-right"],["type","button","style","color: #7AB800 !important","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"example-container"],[1,"col-xs-12","col-md-6",2,"flex","0 0 0% !important"],[1,"example-header"],["matInput","","placeholder","Filter",3,"keyup"],[3,"pageSizeOptions"],["matPaginator7",""],["matSort","",3,"dataSource"],["sort7","matSort"],["matColumnDef","No"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","NombrePerfil"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","row",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-outline-secondary",2,"color","#7AB800 !important",3,"click"],[1,"fas","fa-plus-circle"],["mat-sort-header",""],["href","javascript:;","class","btn btn-xs btn-default btn-text-default btn-hover-primary btn-icon","title","Editar",3,"click",4,"ngIf"],["href","javascript:;","class","btn btn-xs btn-default btn-text-default btn-hover-danger btn-icon","title","Eliminar",3,"click",4,"ngIf"],["href","javascript:;","title","Editar",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-primary","btn-icon",3,"click"],[1,"fa","fa-edit","icon-nm"],["href","javascript:;","title","Eliminar",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-danger","btn-icon",3,"click"],[1,"fa","fa-trash-alt","icon-nm"],[1,"col-xs-0","col-md-2"],[1,"col-xs-12","col-md-8"],[1,"card","card-custom",2,"box-shadow","0px 0px"],[1,"h3"],[1,"col-md-5"],["maxlength","50","type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-md-2"],[1,"form-control","form-control-sm"],[1,"fa","fa-check"],[1,"card-footer",2,"border-top","0px","padding","0px"],[1,"btn","btn-light","btn-text-success","btn-hover-text-success","font-weight-bold",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-light","btn-text-dark","btn-hover-text-dark","font-weight-bold",2,"margin-left","5px",3,"click"],[1,"fa","fa-times"]],template:function(e,t){1&e&&(_.Wb(0,"div",0),_.Wb(1,"div",1),_.Wb(2,"div",2),_.Wb(3,"h2",3),_.Rb(4,"i",4),_.Nc(5," Administraci\xf3n de Perf\xedles"),_.Vb(),_.Vb(),_.Vb(),_.Wb(6,"div",5),_.Wb(7,"div",6),_.Wb(8,"div",7),_.Wb(9,"div",8),_.Wb(10,"div",6),_.Rb(11,"div",9),_.Wb(12,"div",10),_.Lc(13,ae,3,0,"button",11),_.Vb(),_.Vb(),_.Wb(14,"div",6),_.Wb(15,"div",12),_.Wb(16,"div",13),_.Wb(17,"div",14),_.Wb(18,"mat-form-field"),_.Wb(19,"input",15),_.gc("keyup",function(e){return t.applyFilter7(e.target.value)}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(20,"div",7),_.Rb(21,"mat-paginator",16,17),_.Wb(23,"mat-table",18,19),_.Ub(25,20),_.Lc(26,ne,2,0,"mat-header-cell",21),_.Lc(27,oe,2,1,"mat-cell",22),_.Tb(),_.Ub(28,23),_.Lc(29,ce,2,0,"mat-header-cell",21),_.Lc(30,se,2,1,"mat-cell",22),_.Tb(),_.Ub(31,24),_.Lc(32,le,2,0,"mat-header-cell",25),_.Lc(33,ue,5,2,"mat-cell",22),_.Tb(),_.Lc(34,he,1,0,"mat-header-row",26),_.Lc(35,me,1,0,"mat-row",27),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Lc(36,fe,27,1,"div",28),_.Lc(37,pe,27,1,"div",28),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(38,"ngx-spinner",29),_.Wb(39,"p",30),_.Nc(40," Loading... "),_.Vb(),_.Vb()),2&e&&(_.Cb(9),_.qc("hidden",!t.Page.ShowList),_.Cb(4),_.qc("ngIf",t.Screen.Post),_.Cb(8),_.qc("pageSizeOptions",_.tc(9,ge)),_.Cb(2),_.qc("dataSource",t.dataSourceFolios),_.Cb(11),_.qc("matHeaderRowDef",t.displayedColumns7),_.Cb(1),_.qc("matRowDefColumns",t.displayedColumns7),_.Cb(1),_.qc("ngIf",t.Page.ShowAdd),_.Cb(1),_.qc("ngIf",t.Page.ShowEdit),_.Cb(1),_.qc("fullScreen",!0))},directives:[a.n,g.c,p.b,R.a,N.j,O.a,N.c,N.e,N.b,N.g,N.i,$.a,N.d,O.b,N.a,N.f,N.h,o.d,o.k,o.o,o.r],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}.example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:100%;min-width:100%}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:100%}.mat-column-FolioActivaExpress[_ngcontent-%COMP%], .mat-column-RFC[_ngcontent-%COMP%], .mat-column-TipoAlta[_ngcontent-%COMP%]{flex:0 0 10%!important}.mat-column-FolioActivaExpress[_ngcontent-%COMP%], .mat-column-NombreCliente[_ngcontent-%COMP%], .mat-column-RFC[_ngcontent-%COMP%], .mat-column-TipoAlta[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;width:10%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-NombreCliente[_ngcontent-%COMP%]{flex:0 0 30%!important}[_ngcontent-%COMP%]::-moz-placeholder{color:#c8cfdd;opacity:1}[_ngcontent-%COMP%]::placeholder{color:#c8cfdd;opacity:1}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#c8cfdd}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c8cfdd}.Oferta[_ngcontent-%COMP%]{font-size:11px;font-weight:400;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.Offer[_ngcontent-%COMP%]:hover{background-color:#7ab800;color:#fff}"],changeDetection:0}),e})();var Ce=r("rqpA"),Ve=r("MOgX");const We=["matPaginator7"],Se=["sort7"];function Pe(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",33),_.gc("click",function(){return _.Bc(e),_.kc().ShowAdd()}),_.Rb(1,"i",34),_.Nc(2," Nuevo "),_.Vb()}}function we(e,t){1&e&&(_.Wb(0,"mat-header-cell",35),_.Nc(1," N\xfamero"),_.Vb())}function xe(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.index;_.Cb(1),_.Pc(" ",e+1," ")}}function ke(e,t){1&e&&(_.Wb(0,"mat-header-cell",35),_.Nc(1," Nombre "),_.Vb())}function Ee(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Rc(" ",e.nombre," ",e.apellidopaterno," ",e.apellidomaterno,"")}}function Ne(e,t){1&e&&(_.Wb(0,"mat-header-cell",35),_.Nc(1," Usuario "),_.Vb())}function Ge(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Pc(" ",e.NombreUsuario," ")}}function Ae(e,t){1&e&&(_.Wb(0,"mat-header-cell",35),_.Nc(1," Perf\xedl "),_.Vb())}function Me(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Pc(" ",e.NombrePerfil," ")}}function Ue(e,t){1&e&&(_.Wb(0,"mat-header-cell"),_.Nc(1," Actions "),_.Vb())}function ye(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",38),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().ShowEdit(t)}),_.Rb(1,"i",39),_.Vb()}}function Le(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",40),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().Eliminar(t)}),_.Rb(1,"i",41),_.Vb()}}function Re(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",40),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().ResetPWD(t)}),_.Rb(1,"i",42),_.Vb()}}function De(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Lc(1,ye,2,0,"button",36),_.Nc(2," \xa0 "),_.Lc(3,Le,2,0,"button",37),_.Nc(4," \xa0 "),_.Lc(5,Re,2,0,"button",37),_.Nc(6," \xa0 "),_.Vb()),2&e){const e=_.kc();_.Cb(1),_.qc("ngIf",e.Screen.Put),_.Cb(2),_.qc("ngIf",e.Screen.Delete),_.Cb(2),_.qc("ngIf",e.Screen.ResetPWD)}}function Be(e,t){1&e&&_.Rb(0,"mat-header-row")}function Oe(e,t){1&e&&_.Rb(0,"mat-row")}function Ie(e,t){if(1&e&&(_.Wb(0,"option",52),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.qc("value",e.idperfil),_.Cb(1),_.Pc(" ",e.nombreperfil," ")}}function qe(e,t){if(1&e&&(_.Wb(0,"option",52),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.qc("value",e.Valor),_.Cb(1),_.Pc(" ",e.Descripcion," ")}}function Qe(e,t){if(1&e){const e=_.Xb();_.Wb(0,"div",7),_.Wb(1,"div",15),_.Wb(2,"div",43),_.Wb(3,"div",1),_.Wb(4,"h3",44),_.Nc(5," Nuevo Usuari@ "),_.Vb(),_.Vb(),_.Wb(6,"div",5),_.Wb(7,"div",7),_.Wb(8,"div",45),_.Wb(9,"label"),_.Nc(10,"Usuario"),_.Vb(),_.Wb(11,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Usuario=t}),_.Vb(),_.Vb(),_.Wb(12,"div",45),_.Wb(13,"label"),_.Nc(14,"Perfil"),_.Vb(),_.Wb(15,"select",47),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Perfil=t}),_.Lc(16,Ie,2,2,"option",48),_.Vb(),_.Vb(),_.Wb(17,"div",45),_.Wb(18,"label"),_.Nc(19,"E-mail"),_.Vb(),_.Wb(20,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Correo=t}),_.Vb(),_.Vb(),_.Vb(),_.Rb(21,"br"),_.Wb(22,"div",7),_.Wb(23,"div",45),_.Wb(24,"label"),_.Nc(25,"Nombre"),_.Vb(),_.Wb(26,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Nombre=t}),_.Vb(),_.Vb(),_.Wb(27,"div",45),_.Wb(28,"label"),_.Nc(29,"Apellido Paterno"),_.Vb(),_.Wb(30,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.APA=t}),_.Vb(),_.Vb(),_.Wb(31,"div",45),_.Wb(32,"label"),_.Nc(33,"Apellido Materno"),_.Vb(),_.Wb(34,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.AMA=t}),_.Vb(),_.Vb(),_.Vb(),_.Rb(35,"br"),_.Wb(36,"div",7),_.Wb(37,"div",45),_.Wb(38,"label"),_.Nc(39,"Empresa"),_.Vb(),_.Wb(40,"select",49),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.IdEmpresa=t}),_.Lc(41,qe,2,2,"option",48),_.Vb(),_.Vb(),_.Wb(42,"div",50),_.Wb(43,"label"),_.Nc(44,"Estatus"),_.Vb(),_.Wb(45,"select",51),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Estatus=t}),_.Wb(46,"option",52),_.Nc(47,"Activo"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(48,"div",53),_.Wb(49,"div",15),_.Wb(50,"button",54),_.gc("click",function(){return _.Bc(e),_.kc().Guardar()}),_.Rb(51,"i",55),_.Nc(52," Guardar"),_.Vb(),_.Wb(53,"button",56),_.gc("click",function(){return _.Bc(e),_.kc().Cancelar()}),_.Rb(54,"i",57),_.Nc(55," Cancelar"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&e){const e=_.kc();_.Cb(11),_.qc("ngModel",e.General.Usuario.Usuario),_.Cb(4),_.qc("ngModel",e.General.Usuario.Perfil)("value",0),_.Cb(1),_.qc("ngForOf",e.General.Perfiles),_.Cb(4),_.qc("ngModel",e.General.Usuario.Correo),_.Cb(6),_.qc("ngModel",e.General.Usuario.Nombre),_.Cb(4),_.qc("ngModel",e.General.Usuario.APA),_.Cb(4),_.qc("ngModel",e.General.Usuario.AMA),_.Cb(6),_.qc("value",0)("ngModel",e.General.Usuario.IdEmpresa),_.Cb(1),_.qc("ngForOf",e.ListaEmpresas),_.Cb(4),_.qc("ngModel",e.General.Usuario.Estatus)("value",1),_.Cb(1),_.qc("value",1)}}function Fe(e,t){if(1&e&&(_.Wb(0,"option",52),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.qc("value",e.idperfil),_.Cb(1),_.Pc(" ",e.nombreperfil," ")}}function _e(e,t){if(1&e&&(_.Wb(0,"option",52),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.qc("value",e.Valor),_.Cb(1),_.Pc(" ",e.Descripcion," ")}}function ze(e,t){if(1&e){const e=_.Xb();_.Wb(0,"div",7),_.Wb(1,"div",15),_.Wb(2,"div",43),_.Wb(3,"div",1),_.Wb(4,"h3",44),_.Nc(5," Editar Usuario "),_.Vb(),_.Vb(),_.Wb(6,"div",5),_.Wb(7,"div",7),_.Wb(8,"div",50),_.Wb(9,"label"),_.Nc(10,"Usuario"),_.Vb(),_.Wb(11,"input",58),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Usuario=t}),_.Vb(),_.Vb(),_.Wb(12,"div",45),_.Wb(13,"label"),_.Nc(14,"Perfil"),_.Vb(),_.Wb(15,"select",47),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Perfil=t}),_.Lc(16,Fe,2,2,"option",48),_.Vb(),_.Vb(),_.Wb(17,"div",45),_.Wb(18,"label"),_.Nc(19,"Correo Electr\xf3nico"),_.Vb(),_.Wb(20,"input",59),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Correo=t}),_.Vb(),_.Vb(),_.Vb(),_.Rb(21,"br"),_.Wb(22,"div",7),_.Wb(23,"div",45),_.Wb(24,"label"),_.Nc(25,"Nombre"),_.Vb(),_.Wb(26,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Nombre=t}),_.Vb(),_.Vb(),_.Wb(27,"div",45),_.Wb(28,"label"),_.Nc(29,"Apellido Paterno"),_.Vb(),_.Wb(30,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.APA=t}),_.Vb(),_.Vb(),_.Wb(31,"div",45),_.Wb(32,"label"),_.Nc(33,"Apellido Materno"),_.Vb(),_.Wb(34,"input",46),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.AMA=t}),_.Vb(),_.Vb(),_.Vb(),_.Rb(35,"br"),_.Wb(36,"div",7),_.Wb(37,"div",45),_.Wb(38,"label"),_.Nc(39,"Empresa"),_.Vb(),_.Wb(40,"select",49),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.IdEmpresa=t}),_.Lc(41,_e,2,2,"option",48),_.Vb(),_.Vb(),_.Wb(42,"div",45),_.Wb(43,"label"),_.Nc(44,"Estatus"),_.Vb(),_.Wb(45,"select",51),_.gc("ngModelChange",function(t){return _.Bc(e),_.kc().General.Usuario.Estatus=t}),_.Wb(46,"option",52),_.Nc(47,"Activo"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(48,"div",53),_.Wb(49,"div",7),_.Wb(50,"div",15),_.Wb(51,"button",54),_.gc("click",function(){return _.Bc(e),_.kc().GuardarEditar()}),_.Rb(52,"i",55),_.Nc(53," Guardar"),_.Vb(),_.Nc(54,"\xa0 "),_.Wb(55,"button",56),_.gc("click",function(){return _.Bc(e),_.kc().Cancelar()}),_.Rb(56,"i",57),_.Nc(57," Cancelar"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&e){const e=_.kc();_.Cb(11),_.qc("ngModel",e.General.Usuario.Usuario),_.Cb(4),_.qc("ngModel",e.General.Usuario.Perfil)("value",0),_.Cb(1),_.qc("ngForOf",e.General.Perfiles),_.Cb(4),_.qc("ngModel",e.General.Usuario.Correo),_.Cb(6),_.qc("ngModel",e.General.Usuario.Nombre),_.Cb(4),_.qc("ngModel",e.General.Usuario.APA),_.Cb(4),_.qc("ngModel",e.General.Usuario.AMA),_.Cb(6),_.qc("value",0)("ngModel",e.General.Usuario.IdEmpresa),_.Cb(1),_.qc("ngForOf",e.ListaEmpresas),_.Cb(4),_.qc("ngModel",e.General.Usuario.Estatus)("value",1),_.Cb(1),_.qc("value",1)}}const Te=function(){return[25,50,100]};let $e=(()=>{class e{constructor(e,t,r,i,a,n,o,c,s,l,b){this.snackBar=e,this.ref=t,this.AuthService=r,this.modalService=i,this.toastr=a,this.spinnerService=n,this.router=o,this.sanitizer=c,this.UsuarioService=s,this.ScreenActionsService=l,this.EmpresaService=b,this.Page={},this.Screen={},this.General={},this.displayedColumns7=["No","nombre","NombreUsuario","NombrePerfil","actions"],this.ListaEmpresas=[],this.Page.ShowAdd=!1,this.Page.ShowEdit=!1,this.Page.ShowList=!0,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Perfil={},this.AuthService.IsAlive()}ngOnInit(){this.ScreenActionsService.PromiseAcciones(this.Page.Controller).then(e=>{this.Screen=e,this.CargaEmpresas(),this.CargaDatos()},e=>{this.handleError(e)})}CargaEmpresas(){this.dataSourceUsuarios=new N.k([]),this.spinnerService.show(),this.EmpresaService.GetEmpresas().subscribe(e=>{this.ListaEmpresas=e},e=>{this.handleError(e)})}CargaDatos(){this.dataSourceUsuarios=new N.k([]),this.spinnerService.show(),this.UsuarioService.GetUsuarios().subscribe(e=>{this.dataSourceUsuarios=new N.k(e[0]),this.General.Perfiles=e[1],this.dataSourceUsuarios.paginator=this.paginator7,this.dataSourceUsuarios.sort=this.sort7,this.ref.markForCheck(),this.spinnerService.hide()},e=>{this.handleError(e)})}applyFilter7(e){this.dataSourceUsuarios.filter=e.trim().toLowerCase(),this.dataSourceUsuarios.paginator&&this.dataSourceUsuarios.paginator.firstPage()}ShowAdd(){this.General.Usuario={},this.General.Usuario.Perfil="2",this.General.Usuario.Estatus=1,this.Page.ShowAdd=!0,this.Page.ShowList=!1,this.Page.ShowEdit=!1,this.ref.markForCheck()}Cancelar(){this.Page.ShowList=!0,this.Page.ShowAdd=!1,this.Page.ShowEdit=!1}ShowEdit(e){this.General.Usuario={},this.General.Usuario.Usuario=e.NombreUsuario,this.General.Usuario.Contra="**********",this.General.Usuario.Perfil=e.IdPerfil,this.General.Usuario.Correo=e.CorreoElectronico,this.General.Usuario.Nombre=e.nombre,this.General.Usuario.APA=e.apellidopaterno,this.General.Usuario.AMA=e.apellidomaterno,this.General.Usuario.Estatus=1,this.General.Usuario.IdUsuario=e.IdUsuario,this.General.Usuario.IdEmpresa=e.IdEmpresa,this.General.Usuario.IdEmpleado=e.idempleado,this.General.Perfil.IdPerfil=e.IdPerfil,this.General.Perfil.NombrePerfil=e.NombrePerfil,this.Page.ShowEdit=!0,this.Page.ShowAdd=!1,this.Page.ShowList=!1,this.ref.markForCheck()}Guardar(){if(null==this.General.Usuario.Usuario||this.General.Usuario.Usuario.length<7)this.toastr.error("La longitud del usuario debe ser mayor a 6");else if(this.validateEmail(this.General.Usuario.Correo))if(null==this.General.Usuario.Nombre||this.General.Usuario.Nombre.length<2)this.toastr.error("Ingrese un nombre v\xe1lido");else if(null==this.General.Usuario.APA||this.General.Usuario.APA.length<2)this.toastr.error("Ingrese un apellido paterno v\xe1lido");else if(null==this.General.Usuario.AMA||this.General.Usuario.AMA.length<2)this.toastr.error("Ingrese un apellido materno v\xe1lido");else{var e="PasswordTemporal"+this.getRandomInt(1,1e4);this.General.Usuario.Contra=e,this.UsuarioService.Post(this.General.Usuario).subscribe(t=>{H.a.fire({title:"Confirmaci\xf3n",text:"Usuario registrado correctamente. Contrase\xf1a: "+e,icon:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar"}).then(e=>{}),this.CargaDatos(),this.Cancelar(),this.spinnerService.hide()},e=>{this.handleError(e)})}else this.toastr.error("El correo proporcionado no es v\xe1lido, favor de revisar")}GuardarEditar(){null==this.General.Usuario.Nombre||this.General.Usuario.Nombre.length<2?this.toastr.error("Ingrese un nombre v\xe1lido"):null==this.General.Usuario.APA||this.General.Usuario.APA.length<2?this.toastr.error("Ingrese un apellido paterno v\xe1lido"):null==this.General.Usuario.AMA||this.General.Usuario.AMA.length<2?this.toastr.error("Ingrese un apellido materno v\xe1lido"):this.validateEmail(this.General.Usuario.Correo)?this.UsuarioService.UpdateUser(this.General.Usuario).subscribe(e=>{this.toastr.success("La informaci\xf3n se actualiz\xf3 correctamente"),this.CargaDatos(),this.Cancelar(),this.spinnerService.hide()},e=>{this.handleError(e)}):this.toastr.error("El correo proporcionado no es v\xe1lido, favor de revisar")}ResetPWD(e){H.a.fire({title:"Confirmaci\xf3n",text:"\xbfRestablecer contrase\xf1a de: "+e.NombreUsuario+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(t=>{t.value&&this.GuardarReset(e.NombreUsuario)})}GuardarReset(e){var t="Telefonica"+this.getRandomInt(1,1e4);this.UsuarioService.ResetPWD({NombreUsuario:e,Password:t}).subscribe(e=>{H.a.fire({title:"Confirmaci\xf3n",text:"Contrase\xf1a actualizada correctamente a: "+t,icon:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar"}).then(e=>{}),this.Cancelar(),this.CargaDatos()},e=>{this.handleError(e)})}Eliminar(e){H.a.fire({title:"Confirmaci\xf3n",text:"Eliminar la informaci\xf3n del usuario: "+e.NombreUsuario,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.value&&this.GuardarEliminar(e.IdUsuario)})}GuardarEliminar(e){this.UsuarioService.Delete({IdUsuario:e}).subscribe(()=>{this.toastr.success("La informaci\xf3n se elimin\xf3 correctamente"),this.Cancelar(),this.CargaDatos()},e=>{this.handleError(e)})}validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{8,}))$/.test(e)}getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}handleError(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}openSnackBar(e,t){this.snackBar.open(e,t,{duration:2e3})}}return e.\u0275fac=function(t){return new(t||e)(_.Qb(E.a),_.Qb(_.i),_.Qb(j.a),_.Qb(K.y),_.Qb(J.b),_.Qb($.c),_.Qb(n.h),_.Qb(Z.b),_.Qb(Ce.a),_.Qb(te.a),_.Qb(Ve.a))},e.\u0275cmp=_.Kb({type:e,selectors:[["kt-usuarios"]],viewQuery:function(e,t){if(1&e&&(_.Gc(We,!0),_.Gc(Se,!0)),2&e){let e;_.xc(e=_.hc())&&(t.paginator7=e.first),_.xc(e=_.hc())&&(t.sort7=e.first)}},decls:46,vars:10,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[3,"hidden"],[1,"row"],[1,"col-xs-12","col-md-10"],[1,"col-xs-12","col-md-2","text-right"],["type","button","style","color: #7AB800 !important","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"example-container"],[1,"col-xs-12","col-md-6",2,"flex","0 0 0% !important"],[1,"example-header"],["matInput","","placeholder","Filter",3,"keyup"],[1,"col-xs-12","col-md-12"],[3,"pageSizeOptions"],["matPaginator7",""],["matSort","",3,"dataSource"],["sort7","matSort"],["matColumnDef","No"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","NombreUsuario"],["matColumnDef","NombrePerfil"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","row",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-outline-secondary",2,"color","#7AB800 !important",3,"click"],[1,"fas","fa-plus-circle"],["mat-sort-header",""],["style","width:40px !important;","type","button","class","btn btn-xs btn-default btn-text-default btn-hover-primary btn-icon",3,"click",4,"ngIf"],["style","width:40px !important;","type","button","class","btn btn-xs btn-default btn-text-default btn-hover-danger btn-icon",3,"click",4,"ngIf"],["type","button",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-primary","btn-icon",2,"width","40px !important",3,"click"],[1,"fa","fa-edit"],["type","button",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-danger","btn-icon",2,"width","40px !important",3,"click"],[1,"fa","fa-trash-alt"],[1,"fa","fa-unlock"],[1,"card","card-custom",2,"box-shadow","0px 0px"],[1,"h3"],[1,"col-md-4"],["maxlength","50","type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","select",1,"form-control",3,"ngModel","value","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["required","","name","select","name","ddlEmpresa",1,"form-control","form-control-sm",3,"value","ngModel","ngModelChange"],[1,"col-md-2"],["disabled","","name","select",1,"form-control",3,"ngModel","value","ngModelChange"],[3,"value"],[1,"card-footer",2,"border-top","0px","padding","0px"],[1,"btn","btn-light","btn-text-success","btn-hover-text-success","font-weight-bold",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-light","btn-text-dark","btn-hover-text-dark","font-weight-bold",2,"margin-left","5px",3,"click"],[1,"fa","fa-times"],["disabled","","maxlength","50","type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["maxlength","50","type","email",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(_.Wb(0,"div",0),_.Wb(1,"div",1),_.Wb(2,"div",2),_.Wb(3,"h2",3),_.Rb(4,"i",4),_.Nc(5," Administraci\xf3n de Usuarios"),_.Vb(),_.Vb(),_.Vb(),_.Wb(6,"div",5),_.Wb(7,"div"),_.Wb(8,"div",6),_.Wb(9,"div",7),_.Rb(10,"div",8),_.Wb(11,"div",9),_.Lc(12,Pe,3,0,"button",10),_.Vb(),_.Vb(),_.Wb(13,"div",7),_.Wb(14,"div",11),_.Wb(15,"div",12),_.Wb(16,"div",13),_.Wb(17,"mat-form-field"),_.Wb(18,"input",14),_.gc("keyup",function(e){return t.applyFilter7(e.target.value)}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(19,"div",15),_.Rb(20,"mat-paginator",16,17),_.Wb(22,"mat-table",18,19),_.Ub(24,20),_.Lc(25,we,2,0,"mat-header-cell",21),_.Lc(26,xe,2,1,"mat-cell",22),_.Tb(),_.Ub(27,23),_.Lc(28,ke,2,0,"mat-header-cell",21),_.Lc(29,Ee,2,3,"mat-cell",22),_.Tb(),_.Ub(30,24),_.Lc(31,Ne,2,0,"mat-header-cell",21),_.Lc(32,Ge,2,1,"mat-cell",22),_.Tb(),_.Ub(33,25),_.Lc(34,Ae,2,0,"mat-header-cell",21),_.Lc(35,Me,2,1,"mat-cell",22),_.Tb(),_.Ub(36,26),_.Lc(37,Ue,2,0,"mat-header-cell",27),_.Lc(38,De,7,3,"mat-cell",22),_.Tb(),_.Lc(39,Be,1,0,"mat-header-row",28),_.Lc(40,Oe,1,0,"mat-row",29),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Lc(41,Qe,56,14,"div",30),_.Lc(42,ze,58,14,"div",30),_.Vb(),_.Vb(),_.Vb(),_.Wb(43,"ngx-spinner",31),_.Wb(44,"p",32),_.Nc(45," Loading... "),_.Vb(),_.Vb()),2&e&&(_.Cb(8),_.qc("hidden",!t.Page.ShowList),_.Cb(4),_.qc("ngIf",t.Screen.Post),_.Cb(8),_.qc("pageSizeOptions",_.tc(9,Te)),_.Cb(2),_.qc("dataSource",t.dataSourceUsuarios),_.Cb(17),_.qc("matHeaderRowDef",t.displayedColumns7),_.Cb(1),_.qc("matRowDefColumns",t.displayedColumns7),_.Cb(1),_.qc("ngIf",t.Page.ShowAdd),_.Cb(1),_.qc("ngIf",t.Page.ShowEdit),_.Cb(1),_.qc("fullScreen",!0))},directives:[a.n,g.c,p.b,R.a,N.j,O.a,N.c,N.e,N.b,N.g,N.i,$.a,N.d,O.b,N.a,N.f,N.h,o.d,o.k,o.o,o.r,o.w,a.m,o.v,o.s,o.y],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}.example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:100%;min-width:100%}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:100%}.mat-column-NombreCliente[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 30%!important;width:10%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}[_ngcontent-%COMP%]::-moz-placeholder{color:#c8cfdd;opacity:1}[_ngcontent-%COMP%]::placeholder{color:#c8cfdd;opacity:1}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#c8cfdd}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c8cfdd}.Oferta[_ngcontent-%COMP%]{font-size:11px;font-weight:400;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.Offer[_ngcontent-%COMP%]:hover{background-color:#7ab800;color:#fff}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:36px}"],changeDetection:0}),e})(),Xe=(()=>{class e{constructor(e,t){this.api=e,this.router=t,this.oDetalleCuenta={}}GetAccesos(){return this.api.get("Assignment",{})}GuardarCuenta(e){return this.api.post("Assignment",e)}GetDetalleCuenta(e){return this.api.post("Assignment/Detail",e)}ActualizarCuenta(e){return this.api.put("Assignment",e)}EliminarCuenta(e){return this.api.post("Assignment/revoke",e)}ResetAdminCuenta(e){return this.api.post("Assignment/reset",e)}SuspenderReactivar(e){return this.api.post("Assignment/suspending",e)}}return e.\u0275fac=function(t){return new(t||e)(_.dc(Y.a),_.dc(n.h))},e.\u0275prov=_.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var He=r("2jtQ");function je(e,t){if(1&e&&(_.Wb(0,"option",25),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.qc("value",e.Valor),_.Cb(1),_.Pc(" ",e.Descripcion," ")}}let Ke=(()=>{class e{constructor(e,t,r,i,a,n,o,c,s,l){this.snackBar=e,this.AuthService=t,this.toastr=r,this.spinnerService=i,this.router=a,this.sanitizer=n,this.ref=o,this.EmpresaService=c,this.RegistroService=s,this.AssignmentService=l,this.VistaPrincipal=new _.p,this.Page={},this.Screen={},this.General={},this.ListaEmpresas=[],this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Cuenta={}}ngOnInit(){this.CargaEmpresas()}CargaEmpresas(){this.EmpresaService.GetEmpresas().subscribe(e=>{this.ListaEmpresas=e},e=>{this.handleError(e)})}Regresar(e){this.VistaPrincipal.emit(e)}BuscarEmail(e){if(e){let t=this.emailIsValid(e),r={};r.CorreoElectronico=e,t?this.RegistroService.VerificaEmail(r).then(e=>e.json()).then(e=>{e&&1==e.Existe&&(this.toastr.error("El Email ya fue registrado, favor de verificar"),this.General.Cuenta.CorreoElectronico="",this.ref.markForCheck())},e=>{this.handleError(e)}):(this.toastr.error("Email incorrecto, favor de verificar"),this.General.Usuario.CorreoElectronico="")}}emailIsValid(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}CrearPassword(){var e=this.fullDate();this.General.Cuenta.Pass1="Siva_"+e+"@"}fullDate(){var e=new Date,t=e.getFullYear().toString(),r=(e.getMonth()+1).toString(),i=e.getDate().toString();return 1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),t+r}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}PassTest(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[.$@#$!%*?&])[A-Za-z\d.$@#$!%*?&].{10,}/.test(e)}Guardar(){this.emailIsValid(this.General.Cuenta.CorreoElectronico)?this.General.Cuenta.CorreoElectronico==this.General.Cuenta.CorreoElectronico2?null!=this.General.Cuenta.Pass1&&""!=this.General.Cuenta.Pass1?null!=this.General.Cuenta.Nombre&&""!=this.General.Cuenta.Nombre?null!=this.General.Cuenta.ApellidoPaterno&&""!=this.General.Cuenta.ApellidoPaterno?null!=this.General.Cuenta.ApellidoMaterno&&""!=this.General.Cuenta.ApellidoMaterno?null!=this.General.Cuenta.IdEmpresa&&"0"!=this.General.Cuenta.IdEmpresa?this.AssignmentService.GuardarCuenta(this.General.Cuenta).subscribe(e=>{0==e.Valid?this.toastr.error("Ocurri\xf3 un error al crear la cuenta, intente nuevamente"):this.toastr.success("La acci\xf3n se realizo correctamente "),this.Regresar(!0)},e=>{this.handleError(e)}):this.toastr.error("Debe seleccionar una empresa"):this.toastr.error("El campo Apellido Materno no es v\xe1lido"):this.toastr.error("El campo Apellido Paterno no es v\xe1lido"):this.toastr.error("El campo Nombre no es v\xe1lido"):this.toastr.info("Debe Generar un password"):this.toastr.error("Los correos ingresados son diferentes"):this.toastr.error("Email incorrecto, favor de verificar")}handleError(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}openSnackBar(e,t){this.snackBar.open(e,t,{duration:2e3})}}return e.\u0275fac=function(t){return new(t||e)(_.Qb(E.a),_.Qb(j.a),_.Qb(J.b),_.Qb($.c),_.Qb(n.h),_.Qb(Z.b),_.Qb(_.i),_.Qb(Ve.a),_.Qb(He.a),_.Qb(Xe))},e.\u0275cmp=_.Kb({type:e,selectors:[["kt-altacuenta"]],outputs:{VistaPrincipal:"VistaPrincipal"},decls:63,vars:10,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"form-group"],["type","email","maxlength","40","aria-describedby","helpSuscriptor","placeholder","",1,"form-control","form-control-sm","text-lowercase",3,"ngModel","ngModelChange","focusout"],["type","email","maxlength","40","aria-describedby","helpSuscriptor","placeholder","",1,"form-control","form-control-sm","text-lowercase",3,"ngModel","ngModelChange"],[2,"cursor","pointer","text-decoration","underline","color","#3699FF",3,"click"],[1,"form-control","form-control-sm"],["type","text","maxlength","100","aria-describedby","helpServicio","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["required","","name","select","name","ddlEmpresa",1,"form-control","form-control-sm",3,"value","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],[2,"font-weight","700"],[1,"card-footer",2,"border-top","0px","padding","0px"],[1,"btn","btn-light","btn-text-success","btn-hover-text-success","font-weight-bold",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-light","btn-text-dark","btn-hover-text-dark","font-weight-bold",2,"margin-left","5px",3,"click"],[1,"fa","fa-times"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[3,"value"]],template:function(e,t){1&e&&(_.Wb(0,"div",0),_.Wb(1,"div",1),_.Wb(2,"div",2),_.Wb(3,"h2",3),_.Rb(4,"i",4),_.Nc(5," Registro de Administraci\xf3n de Cuenta de Empresa"),_.Vb(),_.Vb(),_.Vb(),_.Wb(6,"div",5),_.Wb(7,"div",6),_.Wb(8,"div",7),_.Wb(9,"div",8),_.Wb(10,"label"),_.Nc(11,"*Usuario (Email)"),_.Vb(),_.Wb(12,"input",9),_.gc("ngModelChange",function(e){return t.General.Cuenta.CorreoElectronico=e})("focusout",function(e){return t.BuscarEmail(e.target.value)}),_.Vb(),_.Vb(),_.Vb(),_.Wb(13,"div",7),_.Wb(14,"div",8),_.Wb(15,"label"),_.Nc(16,"*Confirmar (email)"),_.Vb(),_.Wb(17,"input",10),_.gc("ngModelChange",function(e){return t.General.Cuenta.CorreoElectronico2=e}),_.Vb(),_.Vb(),_.Vb(),_.Wb(18,"div",7),_.Wb(19,"div",8),_.Wb(20,"label",11),_.gc("click",function(){return t.CrearPassword()}),_.Nc(21,"*Autogenerar Password"),_.Vb(),_.Wb(22,"span",12),_.Nc(23),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(24,"div",6),_.Wb(25,"div",7),_.Wb(26,"div",8),_.Wb(27,"label"),_.Nc(28,"*Nombre"),_.Vb(),_.Wb(29,"input",13),_.gc("ngModelChange",function(e){return t.General.Cuenta.Nombre=e}),_.Vb(),_.Vb(),_.Vb(),_.Wb(30,"div",7),_.Wb(31,"div",8),_.Wb(32,"label"),_.Nc(33,"*Apellido Paterno"),_.Vb(),_.Wb(34,"input",13),_.gc("ngModelChange",function(e){return t.General.Cuenta.ApellidoPaterno=e}),_.Vb(),_.Vb(),_.Vb(),_.Wb(35,"div",7),_.Wb(36,"div",8),_.Wb(37,"label"),_.Nc(38,"*Apellido Materno"),_.Vb(),_.Wb(39,"input",13),_.gc("ngModelChange",function(e){return t.General.Cuenta.ApellidoMaterno=e}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(40,"div",6),_.Wb(41,"div",7),_.Wb(42,"label"),_.Nc(43,"*Empresa"),_.Vb(),_.Wb(44,"select",14),_.gc("ngModelChange",function(e){return t.General.Cuenta.IdEmpresa=e}),_.Lc(45,je,2,2,"option",15),_.Vb(),_.Vb(),_.Vb(),_.Wb(46,"div",6),_.Wb(47,"div",16),_.Rb(48,"br"),_.Wb(49,"label",17),_.Nc(50,"Deber\xe1 compartir el usuario y password generados. Una vez que ingrese al sistema se le solicitara el cambio de password"),_.Vb(),_.Vb(),_.Vb(),_.Wb(51,"div",18),_.Rb(52,"br"),_.Wb(53,"div",7),_.Wb(54,"button",19),_.gc("click",function(){return t.Guardar()}),_.Rb(55,"i",20),_.Nc(56," Guardar"),_.Vb(),_.Wb(57,"button",21),_.gc("click",function(){return t.Regresar(!0)}),_.Rb(58,"i",22),_.Nc(59," Cancelar"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(60,"ngx-spinner",23),_.Wb(61,"p",24),_.Nc(62," Loading... "),_.Vb(),_.Vb()),2&e&&(_.Cb(12),_.qc("ngModel",t.General.Cuenta.CorreoElectronico),_.Cb(5),_.qc("ngModel",t.General.Cuenta.CorreoElectronico2),_.Cb(6),_.Oc(t.General.Cuenta.Pass1),_.Cb(6),_.qc("ngModel",t.General.Cuenta.Nombre),_.Cb(5),_.qc("ngModel",t.General.Cuenta.ApellidoPaterno),_.Cb(5),_.qc("ngModel",t.General.Cuenta.ApellidoMaterno),_.Cb(5),_.qc("value",0)("ngModel",t.General.Cuenta.IdEmpresa),_.Cb(1),_.qc("ngForOf",t.ListaEmpresas),_.Cb(15),_.qc("fullScreen",!0))},directives:[o.d,o.k,o.o,o.r,o.w,o.v,a.m,$.a,o.s,o.y],styles:[""],changeDetection:0}),e})();function Je(e,t){if(1&e&&(_.Wb(0,"option",20),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.qc("value",e.Valor),_.Cb(1),_.Pc(" ",e.Descripcion," ")}}let Ze=(()=>{class e{constructor(e,t,r,i,a,n,o,c,s,l){this.snackBar=e,this.AuthService=t,this.toastr=r,this.spinnerService=i,this.router=a,this.sanitizer=n,this.ref=o,this.EmpresaService=c,this.RegistroService=s,this.AssignmentService=l,this.VistaPrincipal=new _.p,this.Page={},this.Screen={},this.General={},this.ListaEmpresas=[],this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Cuenta={},this.CargaEmpresas()}ngOnInit(){}CargaEmpresas(){this.spinnerService.show(),this.EmpresaService.GetEmpresas().subscribe(e=>{this.ListaEmpresas=e,Object.keys(this.AssignmentService.oDetalleCuenta).length>0&&(this.General.Cuenta=this.AssignmentService.oDetalleCuenta),this.spinnerService.hide()},e=>{this.handleError(e)})}Regresar(e){this.VistaPrincipal.emit(e)}emailIsValid(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}Guardar(){null!=this.General.Cuenta.Nombre&&""!=this.General.Cuenta.Nombre?null!=this.General.Cuenta.ApellidoPaterno&&""!=this.General.Cuenta.ApellidoPaterno?null!=this.General.Cuenta.ApellidoMaterno&&""!=this.General.Cuenta.ApellidoMaterno?null!=this.General.Cuenta.IdEmpresa&&"0"!=this.General.Cuenta.IdEmpresa?this.AssignmentService.ActualizarCuenta(this.General.Cuenta).subscribe(e=>{0==e.Valid?this.toastr.error("Ocurri\xf3 un error al crear la cuenta, intente nuevamente"):this.toastr.success("La acci\xf3n se realizo correctamente "),this.Regresar(!0)},e=>{this.handleError(e)}):this.toastr.error("Debe seleccionar una empresa"):this.toastr.error("El campo Apellido Materno no es v\xe1lido"):this.toastr.error("El campo Apellido Paterno no es v\xe1lido"):this.toastr.error("El campo Nombre no es v\xe1lido")}handleError(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}openSnackBar(e,t){this.snackBar.open(e,t,{duration:2e3})}}return e.\u0275fac=function(t){return new(t||e)(_.Qb(E.a),_.Qb(j.a),_.Qb(J.b),_.Qb($.c),_.Qb(n.h),_.Qb(Z.b),_.Qb(_.i),_.Qb(Ve.a),_.Qb(He.a),_.Qb(Xe))},e.\u0275cmp=_.Kb({type:e,selectors:[["kt-editarcuenta"]],outputs:{VistaPrincipal:"VistaPrincipal"},decls:48,vars:8,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"form-group"],[1,"form-control","form-control-sm",2,"background-color","#F3F6F9"],["type","text","maxlength","100","aria-describedby","helpServicio","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["required","","name","select","name","ddlEmpresa",1,"form-control","form-control-sm",3,"value","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer",2,"border-top","0px","padding","0px"],[1,"btn","btn-light","btn-text-success","btn-hover-text-success","font-weight-bold",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-light","btn-text-dark","btn-hover-text-dark","font-weight-bold",2,"margin-left","5px",3,"click"],[1,"fa","fa-times"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[3,"value"]],template:function(e,t){1&e&&(_.Wb(0,"div",0),_.Wb(1,"div",1),_.Wb(2,"div",2),_.Wb(3,"h2",3),_.Rb(4,"i",4),_.Nc(5," Editar Registro de Administraci\xf3n de Cuenta de Empresa"),_.Vb(),_.Vb(),_.Vb(),_.Wb(6,"div",5),_.Wb(7,"div",6),_.Wb(8,"div",7),_.Wb(9,"div",8),_.Wb(10,"label"),_.Nc(11,"*Usuario (Email)"),_.Vb(),_.Wb(12,"span",9),_.Nc(13),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(14,"div",6),_.Wb(15,"div",7),_.Wb(16,"div",8),_.Wb(17,"label"),_.Nc(18,"*Nombre"),_.Vb(),_.Wb(19,"input",10),_.gc("ngModelChange",function(e){return t.General.Cuenta.Nombre=e}),_.Vb(),_.Vb(),_.Vb(),_.Wb(20,"div",7),_.Wb(21,"div",8),_.Wb(22,"label"),_.Nc(23,"*Apellido Paterno"),_.Vb(),_.Wb(24,"input",10),_.gc("ngModelChange",function(e){return t.General.Cuenta.ApellidoPaterno=e}),_.Vb(),_.Vb(),_.Vb(),_.Wb(25,"div",7),_.Wb(26,"div",8),_.Wb(27,"label"),_.Nc(28,"*Apellido Materno"),_.Vb(),_.Wb(29,"input",10),_.gc("ngModelChange",function(e){return t.General.Cuenta.ApellidoMaterno=e}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(30,"div",6),_.Wb(31,"div",7),_.Wb(32,"label"),_.Nc(33,"*Empresa"),_.Vb(),_.Wb(34,"select",11),_.gc("ngModelChange",function(e){return t.General.Cuenta.IdEmpresa=e}),_.Lc(35,Je,2,2,"option",12),_.Vb(),_.Vb(),_.Vb(),_.Wb(36,"div",13),_.Rb(37,"br"),_.Wb(38,"div",7),_.Wb(39,"button",14),_.gc("click",function(){return t.Guardar()}),_.Rb(40,"i",15),_.Nc(41," Guardar"),_.Vb(),_.Wb(42,"button",16),_.gc("click",function(){return t.Regresar(!0)}),_.Rb(43,"i",17),_.Nc(44," Cancelar"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(45,"ngx-spinner",18),_.Wb(46,"p",19),_.Nc(47," Loading... "),_.Vb(),_.Vb()),2&e&&(_.Cb(13),_.Pc(" ",t.General.Cuenta.CorreoElectronico,""),_.Cb(6),_.qc("ngModel",t.General.Cuenta.Nombre),_.Cb(5),_.qc("ngModel",t.General.Cuenta.ApellidoPaterno),_.Cb(5),_.qc("ngModel",t.General.Cuenta.ApellidoMaterno),_.Cb(5),_.qc("value",0)("ngModel",t.General.Cuenta.IdEmpresa),_.Cb(1),_.qc("ngForOf",t.ListaEmpresas),_.Cb(10),_.qc("fullScreen",!0))},directives:[o.d,o.k,o.o,o.r,o.w,o.v,a.m,$.a,o.s,o.y],styles:[""],changeDetection:0}),e})();const Ye=["matPaginator7"],et=["sort7"];function tt(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",31),_.gc("click",function(){return _.Bc(e),_.kc().ShowAdd()}),_.Rb(1,"i",32),_.Nc(2," Nuevo "),_.Vb()}}function rt(e,t){1&e&&(_.Wb(0,"mat-header-cell"),_.Nc(1," Actions "),_.Vb())}function it(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",37),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().ShowEdit(t)}),_.Rb(1,"i",38),_.Vb()}}function at(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",39),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().Suspender(t)}),_.Rb(1,"i",40),_.Vb()}}function nt(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",41),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().Eliminar(t)}),_.Rb(1,"i",42),_.Vb()}}function ot(e,t){if(1&e){const e=_.Xb();_.Wb(0,"button",43),_.gc("click",function(){_.Bc(e);const t=_.kc().$implicit;return _.kc().ResetPWD(t)}),_.Rb(1,"i",44),_.Vb()}}function ct(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Lc(1,it,2,0,"button",33),_.Nc(2," \xa0 "),_.Lc(3,at,2,0,"button",34),_.Nc(4," \xa0 "),_.Lc(5,nt,2,0,"button",35),_.Nc(6," \xa0 "),_.Lc(7,ot,2,0,"button",36),_.Nc(8," \xa0 "),_.Vb()),2&e){const e=_.kc();_.Cb(1),_.qc("ngIf",e.Screen.Put),_.Cb(2),_.qc("ngIf",e.Screen.Reactive),_.Cb(2),_.qc("ngIf",e.Screen.Delete),_.Cb(2),_.qc("ngIf",e.Screen.Reset)}}function st(e,t){1&e&&(_.Wb(0,"mat-header-cell",45),_.Nc(1," Estatus "),_.Vb())}function lt(e,t){if(1&e&&(_.Wb(0,"div"),_.Wb(1,"span",48),_.Nc(2),_.Vb(),_.Vb()),2&e){const e=_.kc().$implicit;_.Cb(2),_.Pc(" ",e.Status,"")}}function bt(e,t){if(1&e&&(_.Wb(0,"div"),_.Wb(1,"span",49),_.Nc(2),_.Vb(),_.Vb()),2&e){const e=_.kc().$implicit;_.Cb(2),_.Pc(" ",e.Status,"")}}function dt(e,t){if(1&e&&(_.Wb(0,"div"),_.Wb(1,"span",50),_.Nc(2),_.Vb(),_.Vb()),2&e){const e=_.kc().$implicit;_.Cb(2),_.Pc(" ",e.Status,"")}}function ut(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Wb(1,"div",46),_.Lc(2,lt,3,1,"div",47),_.Lc(3,bt,3,1,"div",47),_.Lc(4,dt,3,1,"div",47),_.Vb(),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.qc("ngSwitch",e.Status),_.Cb(1),_.qc("ngSwitchCase","Suspendido"),_.Cb(1),_.qc("ngSwitchCase","Activo"),_.Cb(1),_.qc("ngSwitchCase","Cambio Password")}}function ht(e,t){1&e&&(_.Wb(0,"mat-header-cell",45),_.Nc(1," Usuario "),_.Vb())}function mt(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Pc(" ",e.NombreUsuario," ")}}function ft(e,t){1&e&&(_.Wb(0,"mat-header-cell",45),_.Nc(1," Nombre "),_.Vb())}function pt(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Pc(" ",e.Nombre," ")}}function gt(e,t){1&e&&(_.Wb(0,"mat-header-cell",45),_.Nc(1," Asignado a "),_.Vb())}function vt(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Pc(" ",e.RazonSocial," ")}}function Ct(e,t){1&e&&(_.Wb(0,"mat-header-cell",45),_.Nc(1," Perf\xedl "),_.Vb())}function Vt(e,t){if(1&e&&(_.Wb(0,"mat-cell"),_.Nc(1),_.Vb()),2&e){const e=t.$implicit;_.Cb(1),_.Pc(" ",e.NombrePerfil," ")}}function Wt(e,t){1&e&&_.Rb(0,"mat-header-row")}function St(e,t){1&e&&_.Rb(0,"mat-row")}function Pt(e,t){if(1&e){const e=_.Xb();_.Wb(0,"div"),_.Wb(1,"kt-altacuenta",51,52),_.gc("VistaPrincipal",function(t){return _.Bc(e),_.kc().ShowVistaPrincipal(t)}),_.Vb(),_.Vb()}}function wt(e,t){if(1&e){const e=_.Xb();_.Wb(0,"div"),_.Wb(1,"kt-editarcuenta",51,53),_.gc("VistaPrincipal",function(t){return _.Bc(e),_.kc().ShowVistaPrincipal(t)}),_.Vb(),_.Vb()}}const xt=function(){return[25,50,75,100]},kt=[{path:"",component:z,children:[{path:"security/perfil",component:ve},{path:"security/usuario",component:$e},{path:"config/assignment",component:(()=>{class e{constructor(e,t,r,i,a,n,o,c,s,l,b){this.snackBar=e,this.ref=t,this.AuthService=r,this.modalService=i,this.toastr=a,this.spinnerService=n,this.router=o,this.UsuarioService=c,this.ScreenActionsService=s,this.AssignmentService=l,this.EmpresaService=b,this.Page={},this.Screen={},this.General={},this.displayedColumns7=["actions","Status","NombreUsuario","Nombre","RazonSocial","NombrePerfil"],this.ListaEmpresas=[],this.Page.ShowAdd=!1,this.Page.ShowEdit=!1,this.Page.ShowList=!0,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Perfil={},this.AuthService.IsAlive()}ngOnInit(){this.ScreenActionsService.PromiseAcciones(this.Page.Controller).then(e=>{this.Screen=e,this.CargaDatos()},e=>{this.handleError(e)})}CargaDatos(){this.dataSourceUsuarios=new N.k([]),this.spinnerService.show(),this.AssignmentService.GetAccesos().subscribe(e=>{this.dataSourceUsuarios=new N.k(e),this.dataSourceUsuarios.paginator=this.paginator7,this.dataSourceUsuarios.sort=this.sort7,this.ref.markForCheck(),this.spinnerService.hide()},e=>{this.handleError(e)})}applyFilter7(e){this.dataSourceUsuarios.filter=e.trim().toLowerCase(),this.dataSourceUsuarios.paginator&&this.dataSourceUsuarios.paginator.firstPage()}ShowAdd(){this.Page.ShowAdd=!0,this.Page.ShowList=!1,this.ref.markForCheck()}Cancelar(){this.Page.ShowList=!0,this.Page.ShowAdd=!1,this.Page.ShowEdit=!1}ShowVistaPrincipal(e){this.Page.ShowAdd=!1,this.Page.ShowEdit=!1,this.Page.ShowList=e,this.CargaDatos()}ShowEdit(e){this.spinnerService.show(),this.AssignmentService.GetDetalleCuenta(e).subscribe(t=>{this.AssignmentService.oDetalleCuenta=t,this.AssignmentService.oDetalleCuenta.Reference=e.Reference,this.Page.ShowAdd=!1,this.Page.ShowEdit=!0,this.Page.ShowList=!1,this.spinnerService.hide()},e=>{this.handleError(e)})}Eliminar(e){H.a.fire({title:"Confirmaci\xf3n",text:"Desea eliminar definitivamente el acceso al usuario: "+e.NombreUsuario+". Al realizar esta acci\xf3n el usuario ya no tendr\xe1 acceso al sistema. Esta acci\xf3n es irreversible",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.value&&this.GuardarEliminar(e)})}GuardarEliminar(e){this.spinnerService.show(),this.AssignmentService.EliminarCuenta(e).subscribe(e=>{this.spinnerService.hide(),this.toastr.success("La tarea se realiz\xf3 correctamente"),this.CargaDatos()},e=>{this.handleError(e)})}ResetPWD(e){H.a.fire({title:"Confirmaci\xf3n",text:"Desea reestablecer la contrase\xf1a del usuario: "+e.NombreUsuario,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(t=>{t.value&&this.GuardarResetearUsuario(e)})}GuardarResetearUsuario(e){this.spinnerService.show(),this.AssignmentService.ResetAdminCuenta(e).subscribe(e=>{1==e.Valid?(window.confirm("Password Temporal: "+e.Temporal),this.toastr.success("La acci\xf3n se realiz\xf3 correctamente. Email Enviado")):this.toastr.error("Ocurri\xf3 un error al realizar la tarea, intente m\xe1s tarde"),this.spinnerService.hide(),this.ref.markForCheck()},e=>{this.handleError(e)})}Suspender(e){let t="";t="Cambio Password"==e.Status||"Activo"==e.Status?"Desea Suspender al Usuario: "+e.NombreUsuario:"Desea Reactivar al Usuario: "+e.NombreUsuario,H.a.fire({title:"Confirmaci\xf3n",text:t,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(t=>{t.value&&this.GuardarReactivarSuspender(e)})}GuardarReactivarSuspender(e){let t={};t.Reference=e.Reference,t.NombreUsuario=e.NombreUsuario,this.spinnerService.show(),this.AssignmentService.SuspenderReactivar(t).subscribe(e=>{1==e.Valid?(this.CargaDatos(),this.toastr.success("La acci\xf3n se realiz\xf3 correctamente.")):this.toastr.error("Ocurri\xf3 un error al realizar la tarea, intente m\xe1s tarde"),this.spinnerService.hide()},e=>{this.handleError(e)})}getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}handleError(e){this.spinnerService.hide(),this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion)}openSnackBar(e,t){this.snackBar.open(e,t,{duration:2e3})}}return e.\u0275fac=function(t){return new(t||e)(_.Qb(E.a),_.Qb(_.i),_.Qb(j.a),_.Qb(K.y),_.Qb(J.b),_.Qb($.c),_.Qb(n.h),_.Qb(Ce.a),_.Qb(te.a),_.Qb(Xe),_.Qb(Ve.a))},e.\u0275cmp=_.Kb({type:e,selectors:[["kt-bandejaaccesos"]],viewQuery:function(e,t){if(1&e&&(_.Gc(Ye,!0),_.Gc(et,!0)),2&e){let e;_.xc(e=_.hc())&&(t.paginator7=e.first),_.xc(e=_.hc())&&(t.sort7=e.first)}},decls:45,vars:10,consts:[[1,"card","card-custom",3,"hidden"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[1,"col-xs-12","col-md-2"],["type","button","style","color: #7AB800 !important","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"row"],[1,"col-xs-12","col-md-12",2,"flex","0 0 0% !important"],[1,"example-header"],["matInput","","placeholder","Buscar",3,"keyup"],[1,"col-xs-12","col-md-12"],[3,"pageSizeOptions"],["matPaginator7",""],["matSort","",3,"dataSource"],["sort7","matSort"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Status"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","NombreUsuario"],["matColumnDef","Nombre"],["matColumnDef","RazonSocial"],["matColumnDef","NombrePerfil"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-outline-secondary",2,"color","#7AB800 !important",3,"click"],[1,"fas","fa-plus-circle"],["style","width:40px !important;","type","button","data-toggle","tooltip","title","Editar informaci\xf3n","class","btn btn-xs btn-default btn-text-default btn-hover-primary btn-icon",3,"click",4,"ngIf"],["style","width:40px !important;","type","button","data-toggle","tooltip","title","Activar o Desactivar Usuario","class","btn btn-xs btn-default btn-text-default btn-hover-danger btn-icon",3,"click",4,"ngIf"],["style","width:40px !important;","type","button","data-toggle","tooltip","title","Eliminar definitivamente","class","btn btn-xs btn-default btn-text-default btn-hover-danger btn-icon",3,"click",4,"ngIf"],["style","width:40px !important;","type","button","data-toggle","tooltip","title","Resetear Password de Gestor de Empresa","class","btn btn-xs btn-default btn-text-default btn-hover-danger btn-icon",3,"click",4,"ngIf"],["type","button","data-toggle","tooltip","title","Editar informaci\xf3n",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-primary","btn-icon",2,"width","40px !important",3,"click"],[1,"fa","fa-edit"],["type","button","data-toggle","tooltip","title","Activar o Desactivar Usuario",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-danger","btn-icon",2,"width","40px !important",3,"click"],[1,"far","fa-eye-slash"],["type","button","data-toggle","tooltip","title","Eliminar definitivamente",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-danger","btn-icon",2,"width","40px !important",3,"click"],[1,"far","fa-trash-alt"],["type","button","data-toggle","tooltip","title","Resetear Password de Gestor de Empresa",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-danger","btn-icon",2,"width","40px !important",3,"click"],[1,"fa","fa-unlock"],["mat-sort-header",""],[3,"ngSwitch"],[4,"ngSwitchCase"],["data-toggle","tooltip","title","Proveedor suspendido",1,"label","font-weight-bold","label-lg","label-light-danger","label-inline"],["data-toggle","tooltip","title","Proveedor activo",1,"label","font-weight-bold","label-lg","label-light-success","label-inline"],["data-toggle","tooltip","title","Solicito reseteo de contrase\xf1a",1,"label","font-weight-bold","label-lg","label-light-warning","label-inline"],[3,"VistaPrincipal"],["sharecmp",""],["sharecmpEdit",""]],template:function(e,t){1&e&&(_.Wb(0,"div",0),_.Wb(1,"div",1),_.Wb(2,"div",2),_.Wb(3,"h2",3),_.Rb(4,"i",4),_.Nc(5," Configuraci\xf3n de accesos "),_.Vb(),_.Vb(),_.Vb(),_.Wb(6,"div",5),_.Wb(7,"div",6),_.Lc(8,tt,3,0,"button",7),_.Vb(),_.Wb(9,"div",8),_.Wb(10,"div",9),_.Rb(11,"br"),_.Wb(12,"div",10),_.Wb(13,"mat-form-field"),_.Wb(14,"input",11),_.gc("keyup",function(e){return t.applyFilter7(e.target.value)}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(15,"div",12),_.Rb(16,"mat-paginator",13,14),_.Wb(18,"mat-table",15,16),_.Ub(20,17),_.Lc(21,rt,2,0,"mat-header-cell",18),_.Lc(22,ct,9,4,"mat-cell",19),_.Tb(),_.Ub(23,20),_.Lc(24,st,2,0,"mat-header-cell",21),_.Lc(25,ut,5,4,"mat-cell",19),_.Tb(),_.Ub(26,22),_.Lc(27,ht,2,0,"mat-header-cell",21),_.Lc(28,mt,2,1,"mat-cell",19),_.Tb(),_.Ub(29,23),_.Lc(30,ft,2,0,"mat-header-cell",21),_.Lc(31,pt,2,1,"mat-cell",19),_.Tb(),_.Ub(32,24),_.Lc(33,gt,2,0,"mat-header-cell",21),_.Lc(34,vt,2,1,"mat-cell",19),_.Tb(),_.Ub(35,25),_.Lc(36,Ct,2,0,"mat-header-cell",21),_.Lc(37,Vt,2,1,"mat-cell",19),_.Tb(),_.Lc(38,Wt,1,0,"mat-header-row",26),_.Lc(39,St,1,0,"mat-row",27),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Lc(40,Pt,3,0,"div",28),_.Lc(41,wt,3,0,"div",28),_.Wb(42,"ngx-spinner",29),_.Wb(43,"p",30),_.Nc(44," Loading... "),_.Vb(),_.Vb()),2&e&&(_.qc("hidden",!t.Page.ShowList),_.Cb(8),_.qc("ngIf",t.Screen.Post),_.Cb(8),_.qc("pageSizeOptions",_.tc(9,xt)),_.Cb(2),_.qc("dataSource",t.dataSourceUsuarios),_.Cb(20),_.qc("matHeaderRowDef",t.displayedColumns7),_.Cb(1),_.qc("matRowDefColumns",t.displayedColumns7),_.Cb(1),_.qc("ngIf",t.Page.ShowAdd),_.Cb(1),_.qc("ngIf",t.Page.ShowEdit),_.Cb(1),_.qc("fullScreen",!0))},directives:[a.n,g.c,p.b,R.a,N.j,O.a,N.c,N.e,N.b,N.g,N.i,$.a,N.d,N.a,O.b,a.p,a.q,N.f,N.h,Ke,Ze],styles:[".mat-table[_ngcontent-%COMP%]{overflow-x:scroll}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:normal;display:table-cell;padding:0 10px;line-break:unset;width:90%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{display:table-row}"],changeDetection:0}),e})()},{path:"config/refresh",component:(()=>{class e{constructor(e,t){this.router=e,this.EmpresaService=t,document.getElementById("EnterpriseName").innerHTML=JSON.parse(JSON.stringify(this.EmpresaService.Empresa.Descripcion)),this.router.navigate([this.EmpresaService.Empresa.LastUrl])}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(_.Qb(n.h),_.Qb(Ve.a))},e.\u0275cmp=_.Kb({type:e,selectors:[["kt-refresh"]],decls:3,vars:1,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"]],template:function(e,t){1&e&&(_.Wb(0,"ngx-spinner",0),_.Wb(1,"p",1),_.Nc(2," Loading... "),_.Vb(),_.Vb()),2&e&&_.qc("fullScreen",!0)},directives:[$.a],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}.example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:100%;min-width:100%}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:100%}.mat-column-NombreCliente[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 30%!important;width:10%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}[_ngcontent-%COMP%]::-moz-placeholder{color:#c8cfdd;opacity:1}[_ngcontent-%COMP%]::placeholder{color:#c8cfdd;opacity:1}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#c8cfdd}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c8cfdd}.Oferta[_ngcontent-%COMP%]{font-size:11px;font-weight:400;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.Offer[_ngcontent-%COMP%]:hover{background-color:#7ab800;color:#fff}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:36px}"],changeDetection:0}),e})()}]}];let Et=(()=>{class e{}return e.\u0275mod=_.Ob({type:e}),e.\u0275inj=_.Nb({factory:function(t){return new(t||e)},providers:[u.c,{provide:q.d,useValue:{}},{provide:q.a,useValue:{}},{provide:b.f,useValue:"en-GB"},{provide:f.a,useValue:{useUtc:!0}}],imports:[[a.c,p.c,g.e,m.c,v.b,G.d,M.b,P.g,S.b,C.c,u.b,b.m,l.b,h.b,w.c,V.d,W.b,A.g,x.b,k.b,E.b,N.l,U.b,I.b,q.c,Q.b,F.b,O.c,B.d,D.e,R.b,d.f,b.u,c.a,i.c,L.d,y.c,s.a,T.a,$.b,o.j,o.u,n.l.forChild(kt)],n.l]}),e})()}}]);