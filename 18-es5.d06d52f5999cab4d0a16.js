!function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{MinF:function(e,a,n){"use strict";n.r(a),n.d(a,"OpinionCumplimientoModule",function(){return It});var o,r,c,l=n("QibW"),s=n("ofXK"),b=n("tyNb"),d=n("3Pt+"),u=n("WsYS"),p=n("93Pz"),h=n("1jcm"),f=n("FKr1"),m=n("0IaG"),g=n("NFeN"),v=n("bSwM"),C=n("iadO"),S=n("1yaQ"),V=n("qFsG"),U=n("kmnG"),w=n("/1cH"),y=n("bTqV"),k=n("wZkO"),P=n("Qu3c"),D=n("d3UM"),F=n("Wp6s"),O=n("STbY"),I=n("bv9b"),x=n("Xa2L"),R=n("dNgK"),E=n("+0xr"),M=n("MutI"),K=n("XhcP"),A=n("5RNC"),G=n("zkoq"),z=n("jaxi"),L=n("8yBR"),j=n("M9IT"),T=n("A5z7"),B=n("xHqg"),Q=n("Dh3D"),$=n("/t3+"),_=n("2ChS"),N=n("7EHt"),J=n("f0Cb"),q=n("fXoL"),W=((o=function e(){i(this,e)}).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=q.Jb({type:o,selectors:[["kt-opinioncumplimiento"]],decls:1,vars:0,template:function(e,t){1&e&&q.Qb(0,"router-outlet")},directives:[b.m],encapsulation:2,changeDetection:0}),o),H=n("QJFE"),X=n("JqCM"),Y=n("+BVi"),Z=n("1kSV"),ee=n("5eHb"),te=n("jhN1"),ie=n("ptnc"),ae=n("LIxy"),ne=n("ap2d"),oe=((r=function(){function e(t,a){i(this,e),this.api=t,this.router=a,this.oDetalleCliente={}}return t(e,[{key:"GetDetalleOpinionCumplimiento",value:function(){return this.api.get("validator/client",{})}},{key:"GetCliente",value:function(e){return this.api.post("validator/client",e)}},{key:"GetOpinionPreveedor",value:function(e){return this.api.post("OpinionCumplimiento/list",e)}},{key:"ProcesaArchivoPDF",value:function(e){return this.api.post("OpinionCumplimiento",e).toPromise()}},{key:"GetRevisionOpiniones",value:function(){return this.api.get("RevisionOpinion",{})}},{key:"AplicaFiltros",value:function(e){return this.api.post("RevisionOpinion/Filter",e)}}]),e}()).\u0275fac=function(e){return new(e||r)(q.cc(ne.a),q.cc(b.h))},r.\u0275prov=q.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),re=n("tk/3"),ce=n("AytR"),le=n("lJxs"),se=((c=function(){function e(t){i(this,e),this.httpClient=t}return t(e,[{key:"upload",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.httpClient.post("".concat(ce.a.apiUrl,"/").concat(e),t,{headers:new re.e({Authorization:"Bearer "+a.token}),reportProgress:!0,observe:"events"}).pipe(Object(le.a)(function(e){switch(e.type){case re.d.UploadProgress:return{status:"progress",message:Math.round(100*e.loaded/e.total)};case re.d.Response:return e.body;default:return"Unhandled"}}))}},{key:"ProcessCargaArchivoPromise",value:function(e){return this.httpOptions=this.getToken(),this.httpClient.get("".concat(ce.a.apiUrl,"/").concat(e),Object.assign({},this.httpOptions)).toPromise()}},{key:"uploadOpinion",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.httpClient.post("".concat(ce.a.apiUrl,"/").concat(e),t,{headers:new re.e({Authorization:"Bearer "+a.token}),reportProgress:!0,observe:"events"}).pipe(Object(le.a)(function(e){switch(e.type){case re.d.UploadProgress:return{status:"progress",message:Math.round(100*e.loaded/e.total)};case re.d.Response:return e.body;default:return"Unhandled"}}))}},{key:"getToken",value:function(){var e=localStorage.getItem("id_token");return{headers:new re.e({"Content-Type":"application/json",Authorization:"Bearer "+e})}}}]),e}()).\u0275fac=function(e){return new(e||c)(q.cc(re.b))},c.\u0275prov=q.Lb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),be=["matPaginator7"],de=["sort7"],ue=["popCCliente"];function pe(e,t){if(1&e){var i=q.Wb();q.Vb(0,"div"),q.Vb(1,"div",22),q.Vb(2,"div",23),q.Vb(3,"h5",24),q.Qb(4,"i",25),q.Kc(5," Cliente"),q.Ub(),q.Ub(),q.Vb(6,"div",23),q.Qb(7,"hr"),q.Ub(),q.Ub(),q.Vb(8,"div",22),q.Vb(9,"div",26),q.Vb(10,"div",27),q.Vb(11,"label"),q.Kc(12,"Nombre"),q.Ub(),q.Vb(13,"label",28),q.Kc(14),q.Ub(),q.Ub(),q.Ub(),q.Vb(15,"div",29),q.Vb(16,"div",27),q.Vb(17,"label"),q.Kc(18,"RFC"),q.Ub(),q.Vb(19,"label",28),q.Kc(20),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Vb(21,"div",22),q.Vb(22,"div",30),q.Vb(23,"a",31),q.fc("click",function(){return q.zc(i),q.jc().Regresar(!0)}),q.Kc(24,"Cancelar"),q.Ub(),q.Ub(),q.Ub(),q.Ub()}if(2&e){var a=q.jc();q.Cb(14),q.Mc(" ",a.General.Cliente.NombreCliente,""),q.Cb(6),q.Mc(" ",a.General.Cliente.RFC,"")}}var he=function(e){return{width:e}};function fe(e,t){if(1&e&&(q.Vb(0,"div",32),q.Qb(1,"br"),q.Vb(2,"div",33),q.Qb(3,"div",34),q.Ub(),q.Ub()),2&e){var i=q.jc();q.Cb(3),q.pc("ngStyle",q.tc(1,he,i.Avance.message+"%"))}}function me(e,t){if(1&e){var i=q.Wb();q.Vb(0,"div",22),q.Vb(1,"div",35),q.Vb(2,"div",36),q.Vb(3,"h4",37),q.Kc(4,"Archivo Cargado correctamente"),q.Ub(),q.Vb(5,"p"),q.Kc(6," El Archivo se registr\xf3 correctamente."),q.Qb(7,"br"),q.Kc(8," A continuaci\xf3n ser\xe1 validado y recibira una notificaci\xf3n en caso de ser aceptado o rechazado."),q.Ub(),q.Qb(9,"div",38),q.Vb(10,"p",39),q.Vb(11,"button",40),q.fc("click",function(){return q.zc(i),q.jc().Regresar(!0)}),q.Kc(12,"Aceptar"),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Ub()}}function ge(e,t){if(1&e){var i=q.Wb();q.Vb(0,"div",41),q.Vb(1,"h4",42),q.Vb(2,"span",43),q.Kc(3," Se ha detectado una carga previa"),q.Ub(),q.Ub(),q.Vb(4,"button",44),q.fc("click",function(){return(0,t.dismiss)("Cross click")}),q.Vb(5,"span",45),q.Kc(6,"\xd7"),q.Ub(),q.Ub(),q.Ub(),q.Vb(7,"div",46),q.Vb(8,"div",22),q.Vb(9,"div",23),q.Vb(10,"div",27),q.Vb(11,"label"),q.Kc(12,"Si desea volver a cargar su opini\xf3n de cumplimiento, favor de ingresar el motivo"),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Vb(13,"div",22),q.Vb(14,"div",23),q.Vb(15,"div",27),q.Vb(16,"label"),q.Kc(17,"Motivo:"),q.Ub(),q.Vb(18,"textarea",47),q.fc("ngModelChange",function(e){return q.zc(i),q.jc().General.Cliente.MotivoActualizacion=e}),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Vb(19,"div",48),q.Vb(20,"button",49),q.fc("click",function(){return q.zc(i),q.jc().AceptaCarga()}),q.Kc(21,"Aceptar"),q.Ub(),q.Vb(22,"button",50),q.fc("click",function(){return(0,t.close)("Close click")}),q.Kc(23,"Cancelar"),q.Ub(),q.Ub()}if(2&e){var a=q.jc();q.Cb(18),q.pc("ngModel",a.General.Cliente.MotivoActualizacion)}}var ve,Ce=((ve=function(){function e(t,a,n,o,r,c,l,s,b,d){i(this,e),this.snackBar=t,this.AuthService=a,this.toastr=n,this.spinnerService=o,this.router=r,this.sanitizer=c,this.modalService=l,this.OpinionCumplimientoService=s,this.UploadFilesService=b,this.ref=d,this.VistaPrincipal=new q.p,this.Page={},this.Screen={},this.General={},this.Avance={Break:0},this.Documento={},this.Archivo={},this.uploadResponse={status:"",message:0,filePath:""},this.ListaTipoSolicitud=[],this.modalReference=null,this.displayedColumns7=["No","NombrePerfil","actions"],this.Page.ShowAdd=!1,this.Page.ShowEdit=!1,this.Page.ShowUpload=!1,this.Page.ShowRegistro=!0,this.Page.ShowCargaExitosa=!1,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Cliente={}}return t(e,[{key:"ngOnInit",value:function(){Object.keys(this.OpinionCumplimientoService.oDetalleCliente).length>0?(this.General.Cliente=this.OpinionCumplimientoService.oDetalleCliente,this.Page.ShowUpload=!0,this.ref.detectChanges()):this.Regresar(!0)}},{key:"UpLoadFile",value:function(e){var t=this,i=[],a=(i=e.target.files[0].name).substring(i.length-5,i.length),n=e.target.files[0].size/1024,o=a.match(/\.(.+)$/)[1].toLowerCase();if(n>1024)return this.toastr.error("Tama\xf1o de archivo no valido, solo se puede cargar un maximo de 1MB","Error"),void(document.getElementById("fileUploadCuenta").value="");if("pdf"==o){var r=new FormData;r.append("file",e.target.files[0]),r.append("data",JSON.stringify(this.General.Cliente)),this.UploadFilesService.uploadOpinion("report/upload",r).subscribe(function(e){try{if(t.uploadResponse=e,"Unhandled"!=e&&Object.entries(e).length>0){if(e.hasOwnProperty("IdFile")){if(t.General.IdFile=e.IdFile,0==t.General.IdFile)return t.ErrorCargaArchivo(),void t.spinnerService.hide();t.Page.ShowRegistro=!1,t.Page.ShowUpload=!1,t.Page.ShowCargaExitosa=!0,t.ref.detectChanges(),t.timeouts=setTimeout(function(){t.ProcesarArchivo(),t.spinnerService.hide()},1e3)}t.Avance=Object.assign({},t.uploadResponse),t.ref.detectChanges()}100===t.Avance.message&&0==t.Avance.Break&&(t.timeouts=setTimeout(function(){t.openSnackBar("El archivo se cargo correctamente","Cerrar"),t.Avance={status:"",message:0},t.ref.detectChanges()},2e3)),document.getElementById("fileUploadCuenta").value=""}catch(i){t.Avance={status:"",message:100}}},function(e){t.ErrorCargaArchivo()})}else this.toastr.error("Archivo no v\xe1lido","Error")}},{key:"ErrorCargaArchivo",value:function(){this.Avance.Break=1,this.Avance={status:"",message:0},this.ref.detectChanges(),document.getElementById("fileUploadCuenta").value="",this.toastr.error("Ocurrio un error al cargar el archivo")}},{key:"Sube",value:function(){this.General.Cliente.MotivoActualizacion="",0==this.General.Cliente.Cargado?(this.uploadResponse={status:"",message:0,filePath:""},document.getElementById("fileUploadCuenta").click()):(this.modalReference=this.modalService.open(this.popUpRecarga,{size:"lg"}),this.ref.markForCheck())}},{key:"AceptaCarga",value:function(){null==this.General.Cliente.MotivoActualizacion||this.General.Cliente.MotivoActualizacion.length<5?this.openSnackBar("Motivo no v\xe1lido","Cerrar"):(this.modalReference.close(),this.uploadResponse={status:"",message:0,filePath:""},document.getElementById("fileUploadCuenta").click())}},{key:"Regresar",value:function(e){this.VistaPrincipal.emit(e)}},{key:"ProcesarArchivo",value:function(){var e=this;if(this.General.IdFile){this.General.Cliente.Cargado=1;var t={};t.InitProcess=this.General.IdFile,t.Reference=this.General.Cliente.Reference,this.OpinionCumplimientoService.ProcesaArchivoPDF(t).then(function(t){switch(t.Result){case 0:e.toastr.error("Se detect\xf3 un RFC incorrecto por favor valide su archivo.");break;case 3e3:e.toastr.error(t.Message)}},function(e){console.log("Ocurrio un error")})}}},{key:"handleError",value:function(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}}]),e}()).\u0275fac=function(e){return new(e||ve)(q.Pb(R.a),q.Pb(Y.a),q.Pb(ee.b),q.Pb(X.c),q.Pb(b.h),q.Pb(te.b),q.Pb(Z.y),q.Pb(oe),q.Pb(se),q.Pb(q.i))},ve.\u0275cmp=q.Jb({type:ve,selectors:[["kt-cargaoponioncumplimiento"]],viewQuery:function(e,t){var i;1&e&&(q.Ec(be,!0),q.Ec(de,!0),q.Ec(ue,!0)),2&e&&(q.wc(i=q.gc())&&(t.paginator7=i.first),q.wc(i=q.gc())&&(t.sort7=i.first),q.wc(i=q.gc())&&(t.popUpRecarga=i.first))},outputs:{VistaPrincipal:"VistaPrincipal"},decls:33,vars:5,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[4,"ngIf"],[1,"row",3,"hidden"],[1,"col-xs-12","col-md-4"],[1,"col-xs-12","col-md-6"],[1,"row","mt-10"],["id","divOficiosUpLoad",2,"cursor","pointer",3,"click"],[1,"fa","fa-cloud-upload-alt",2,"font-size","40px","margin-top","28px","color","#54637A"],[2,"font-size","11px","font-family","Verdana"],[2,"float","left","width","60%"],[2,"margin-top","-7px"],["type","file","id","fileUploadCuenta",2,"display","none",3,"change"],["class","col-md-8",4,"ngIf"],["class","row",4,"ngIf"],["popCCliente",""],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[1,"row"],[1,"col-md-12"],[2,"color","#7AB800 !important"],[1,"fa","fa-user"],[1,"col-md-5"],[1,"form-group"],["type","text","aria-describedby","helpEmpresa",1,"form-control","form-control-sm"],[1,"col-md-2"],[1,"d-flex","align-items-center","p-2"],["href","javascript:;",1,"btn","btn-transparent-danger","font-weight-bold","mr-2",3,"click"],[1,"col-md-8"],[1,"progress"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",3,"ngStyle"],[1,"col-md-6"],["role","alert",1,"alert","alert-success","mb-5","p-5"],[1,"alert-heading"],[1,"border-bottom","border-white","opacity-20","mb-5"],[1,"mb-0"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"text-muted"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["maxlength","250","cols","6","rows","3",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(q.Vb(0,"div",0),q.Vb(1,"div",1),q.Vb(2,"div",2),q.Vb(3,"h2",3),q.Qb(4,"i",4),q.Kc(5," Registro de Opini\xf3n de Cumplimiento "),q.Ub(),q.Ub(),q.Ub(),q.Vb(6,"div",5),q.Ic(7,pe,25,2,"div",6),q.Vb(8,"div",7),q.Qb(9,"div",8),q.Vb(10,"div",9),q.Vb(11,"div",10),q.Vb(12,"div",11),q.fc("click",function(){return t.Sube()}),q.Qb(13,"i",12),q.Vb(14,"p",13),q.Kc(15,"Agregar Archivo"),q.Ub(),q.Ub(),q.Vb(16,"div",14),q.Qb(17,"br"),q.Qb(18,"br"),q.Vb(19,"p"),q.Kc(20," Los formatos de archivos aceptados son: "),q.Ub(),q.Vb(21,"ul",15),q.Vb(22,"li"),q.Kc(23,"PDF (.pdf) m\xe1ximo 1MB"),q.Ub(),q.Ub(),q.Ub(),q.Vb(24,"input",16),q.fc("change",function(e){return t.UpLoadFile(e)}),q.Ub(),q.Ic(25,fe,4,3,"div",17),q.Ub(),q.Ub(),q.Ub(),q.Ic(26,me,13,0,"div",18),q.Ub(),q.Ub(),q.Vb(27,"div"),q.Ic(28,ge,24,1,"ng-template",null,19,q.Jc),q.Ub(),q.Vb(30,"ngx-spinner",20),q.Vb(31,"p",21),q.Kc(32," Loading... "),q.Ub(),q.Ub()),2&e&&(q.Cb(7),q.pc("ngIf",t.Page.ShowRegistro),q.Cb(1),q.pc("hidden",!t.Page.ShowUpload),q.Cb(17),q.pc("ngIf",t.Avance.message),q.Cb(1),q.pc("ngIf",t.Page.ShowCargaExitosa),q.Cb(4),q.pc("fullScreen",!0))},directives:[s.n,X.a,s.o,d.d,d.k,d.o,d.r],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}"],changeDetection:0}),ve),Se=["sharecmp"],Ve=["matPaginator7"],Ue=["sort7"];function we(e,t){if(1&e&&(q.Vb(0,"option",17),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.pc("value",i.Reference),q.Cb(1),q.Mc(" ",i.RazonSocial," ")}}function ye(e,t){if(1&e){var i=q.Wb();q.Vb(0,"div",4),q.Vb(1,"div",5),q.Vb(2,"div",6),q.Vb(3,"h2",7),q.Qb(4,"i",8),q.Kc(5," Selecci\xf3n de Empresa "),q.Ub(),q.Ub(),q.Ub(),q.Vb(6,"div",9),q.Vb(7,"div"),q.Vb(8,"div",10),q.Vb(9,"div",11),q.Vb(10,"div",12),q.Vb(11,"label"),q.Kc(12,"Seleccione la empresa a la que desea enviar su oponion de cumplimiento"),q.Ub(),q.Vb(13,"select",13),q.fc("ngModelChange",function(e){return q.zc(i),q.jc().General.SeleccionEmpresa.Reference=e}),q.Ic(14,we,2,2,"option",14),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Vb(15,"div",10),q.Vb(16,"div",15),q.Vb(17,"a",16),q.fc("click",function(){return q.zc(i),q.jc().SeleccionarEmpresa()}),q.Kc(18,"Aceptar"),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Ub()}if(2&e){var a=q.jc();q.Cb(13),q.pc("ngModel",a.General.SeleccionEmpresa.Reference)("value",0),q.Cb(1),q.pc("ngForOf",a.ListaEmpresas)}}function ke(e,t){if(1&e){var i=q.Wb();q.Vb(0,"button",38),q.fc("click",function(){return q.zc(i),q.jc(2).ShowLoad()}),q.Qb(1,"i",39),q.Kc(2," Cargar Opini\xf3n "),q.Ub()}}function Pe(e,t){if(1&e){var i=q.Wb();q.Vb(0,"button",38),q.fc("click",function(){return q.zc(i),q.jc(2).CargaDatos()}),q.Qb(1,"i",40),q.Kc(2," Actualizar Estatus "),q.Ub()}}function De(e,t){1&e&&(q.Vb(0,"mat-header-cell",41),q.Kc(1,"Archivos Cargados"),q.Ub())}function Fe(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.Actualizaciones," ")}}function Oe(e,t){1&e&&(q.Vb(0,"mat-header-cell",41),q.Kc(1," Mes "),q.Ub())}function Ie(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.Mes," ")}}function xe(e,t){1&e&&(q.Vb(0,"mat-header-cell",41),q.Kc(1," Estatus "),q.Ub())}function Re(e,t){if(1&e&&(q.Vb(0,"div"),q.Vb(1,"span",44),q.Kc(2),q.Ub(),q.Ub()),2&e){var i=q.jc().$implicit;q.Cb(2),q.Mc(" ",i.Estatus,"")}}function Ee(e,t){if(1&e&&(q.Vb(0,"div"),q.Vb(1,"span",45),q.Kc(2),q.Ub(),q.Ub()),2&e){var i=q.jc().$implicit;q.Cb(2),q.Mc(" ",i.Estatus,"")}}function Me(e,t){if(1&e&&(q.Vb(0,"div"),q.Vb(1,"span",46),q.Kc(2),q.Ub(),q.Ub()),2&e){var i=q.jc().$implicit;q.Cb(2),q.Mc(" ",i.Estatus,"")}}function Ke(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Vb(1,"div",42),q.Ic(2,Re,3,1,"div",43),q.Ic(3,Ee,3,1,"div",43),q.Ic(4,Me,3,1,"div",43),q.Ub(),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.pc("ngSwitch",i.Estatus),q.Cb(1),q.pc("ngSwitchCase","Rechazado"),q.Cb(1),q.pc("ngSwitchCase","Pendiente Revisi\xf3n"),q.Cb(1),q.pc("ngSwitchCase","Recibida")}}function Ae(e,t){1&e&&q.Qb(0,"mat-header-row")}function Ge(e,t){1&e&&q.Qb(0,"mat-row")}var ze=function(){return[25,50,75,100]};function Le(e,t){if(1&e){var i=q.Wb();q.Vb(0,"div",4),q.Vb(1,"div",10),q.Vb(2,"div",18),q.Vb(3,"h1",19),q.Kc(4),q.Qb(5,"i",20),q.Ub(),q.Ub(),q.Vb(6,"span",21),q.Kc(7,"Registro de Opinion de Cumplimiento"),q.Ub(),q.Ub(),q.Vb(8,"div",9),q.Vb(9,"div",10),q.Ic(10,ke,3,0,"button",22),q.Kc(11,"\xa0 "),q.Ic(12,Pe,3,0,"button",22),q.Kc(13,"\xa0 "),q.Ub(),q.Vb(14,"div",10),q.Vb(15,"div",23),q.Qb(16,"br"),q.Vb(17,"div",24),q.Vb(18,"mat-form-field"),q.Vb(19,"input",25),q.fc("keyup",function(e){return q.zc(i),q.jc().applyFilter7(e.target.value)}),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Vb(20,"div",26),q.Qb(21,"mat-paginator",27,28),q.Vb(23,"mat-table",29,30),q.Tb(25,31),q.Ic(26,De,2,0,"mat-header-cell",32),q.Ic(27,Fe,2,1,"mat-cell",33),q.Sb(),q.Tb(28,34),q.Ic(29,Oe,2,0,"mat-header-cell",32),q.Ic(30,Ie,2,1,"mat-cell",33),q.Sb(),q.Tb(31,35),q.Ic(32,xe,2,0,"mat-header-cell",32),q.Ic(33,Ke,5,4,"mat-cell",33),q.Sb(),q.Ic(34,Ae,1,0,"mat-header-row",36),q.Ic(35,Ge,1,0,"mat-row",37),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Ub()}if(2&e){var a=q.jc();q.Cb(4),q.Mc(" ",a.General.DatosEmpresa.RazonSocial," "),q.Cb(6),q.pc("ngIf",a.Screen.Post),q.Cb(2),q.pc("ngIf",a.Screen.Post),q.Cb(9),q.pc("pageSizeOptions",q.sc(7,ze)),q.Cb(2),q.pc("dataSource",a.dataSourceSolicitudes),q.Cb(11),q.pc("matHeaderRowDef",a.displayedColumns7),q.Cb(1),q.pc("matRowDefColumns",a.displayedColumns7)}}function je(e,t){if(1&e){var i=q.Wb();q.Vb(0,"div"),q.Vb(1,"kt-cargaoponioncumplimiento",47,48),q.fc("VistaPrincipal",function(e){return q.zc(i),q.jc().ShowVistaPrincipal(e)}),q.Ub(),q.Ub()}}var Te,Be,Qe=((Te=function(){function e(t,a,n,o,r,c,l,s,b,d,u){i(this,e),this.snackBar=t,this.AuthService=a,this.modalService=n,this.toastr=o,this.spinnerService=r,this.router=c,this.sanitizer=l,this.ScreenActionsService=s,this.DashboardService=b,this.ref=d,this.OpinionCumplimientoService=u,this.Page={},this.Screen={},this.General={},this.ListaEmpresas=[],this.displayedColumns7=["Actualizaciones","Mes","Estatus"],this.Page.ShowLoad=!1,this.Page.ShowEdit=!1,this.Page.ShowList=!1,this.Page.ShowSeleccionEmpresa=!1,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.DatosEmpresa={},this.General.SeleccionEmpresa={}}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.ScreenActionsService.PromiseAcciones(this.Page.Controller).then(function(t){e.Screen=t,0!=Object.keys(e.Screen).length&&e.Screen.Get?0==Object.keys(e.DashboardService.oEmpresa).length&&e.DashboardService.oListaEmpresas.length>0?(e.ListaEmpresas=JSON.parse(JSON.stringify(e.DashboardService.oListaEmpresas)),e.Page.ShowSeleccionEmpresa=!0,e.ref.markForCheck()):Object.keys(e.DashboardService.oEmpresa).length>0&&e.DashboardService.oListaEmpresas.length>0?(e.General.DatosEmpresa=e.DashboardService.oEmpresa,e.OpinionCumplimientoService.oDetalleCliente=e.DashboardService.oEmpresa,e.CargaDatos(),e.Page.ShowList=!0):(e.router.navigate(["/dashboard"]),e.Regresar()):(e.toastr.error("Si intenta acceder a una opci\xf3n no permitida su cuenta ser\xe1 suspendida"),e.router.navigate(["dashboard"]))},function(t){e.handleError(t)})}},{key:"CargaCliente",value:function(){}},{key:"CargaDatos",value:function(){var e=this;if(this.spinnerService.show(),this.dataSourceSolicitudes=new E.k([]),null==this.General.DatosEmpresa||null==this.General.DatosEmpresa.Reference||""==this.General.DatosEmpresa.Reference)return this.toastr.error("Ocurri\xf3 un error al contactar el servidor"),void this.router.navigate(["/dashboard"]);var t={};t.RFC=this.General.DatosEmpresa.RFC,t.Reference=this.General.DatosEmpresa.Reference,this.OpinionCumplimientoService.GetOpinionPreveedor(t).subscribe(function(t){e.dataSourceSolicitudes=new E.k(t),e.dataSourceSolicitudes.paginator=e.paginator7,e.dataSourceSolicitudes.sort=e.sort7,e.spinnerService.hide(),e.ref.markForCheck()},function(t){e.handleError(t)})}},{key:"ShowLoad",value:function(){this.Page.ShowLoad=!0,this.Page.ShowList=!1}},{key:"ShowVistaPrincipal",value:function(e){this.CargaCliente(),this.Page.ShowLoad=!1,this.Page.ShowList=e,this.CargaDatos()}},{key:"ActualizarBandeja",value:function(){this.CargaDatos()}},{key:"applyFilter7",value:function(e){this.dataSourceSolicitudes.filter=e.trim().toLowerCase(),this.dataSourceSolicitudes.paginator&&this.dataSourceSolicitudes.paginator.firstPage()}},{key:"Regresar",value:function(){}},{key:"SeleccionarEmpresa",value:function(){var e=this;if(null!=this.General.SeleccionEmpresa.Reference&&""!=this.General.SeleccionEmpresa.Reference){var t=this.ListaEmpresas.find(function(t){return t.Reference===e.General.SeleccionEmpresa.Reference});null!=t&&null!=t?(this.General.DatosEmpresa.RazonSocial=t.RazonSocial,this.General.DatosEmpresa.Reference=t.Reference,this.CargaDatos(),this.Page.ShowSeleccionEmpresa=!1,this.OpinionCumplimientoService.oDetalleCliente.Reference=t.Reference,this.OpinionCumplimientoService.oDetalleCliente.RFC=t.RFC,this.OpinionCumplimientoService.oDetalleCliente.NombreCliente=t.Cliente,this.OpinionCumplimientoService.oDetalleCliente.Cargado=t.Cargado,this.Page.ShowList=!0,this.ref.markForCheck()):this.toastr.error("selecci\xf3n no v\xe1lida")}else this.toastr.error("Debe seleccionar una empresa")}},{key:"handleError",value:function(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}}]),e}()).\u0275fac=function(e){return new(e||Te)(q.Pb(R.a),q.Pb(Y.a),q.Pb(Z.y),q.Pb(ee.b),q.Pb(X.c),q.Pb(b.h),q.Pb(te.b),q.Pb(ie.a),q.Pb(ae.a),q.Pb(q.i),q.Pb(oe))},Te.\u0275cmp=q.Jb({type:Te,selectors:[["kt-bandejaopinion"]],viewQuery:function(e,t){var i;1&e&&(q.Ec(Se,!0),q.Ec(Ve,!0),q.Ec(Ue,!0)),2&e&&(q.wc(i=q.gc())&&(t.sharecmp=i.first),q.wc(i=q.gc())&&(t.paginator7=i.first),q.wc(i=q.gc())&&(t.sort7=i.first))},decls:6,vars:4,consts:[["class","card card-custom",4,"ngIf"],[4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["name","select",1,"form-control",3,"ngModel","value","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","p-2"],["href","javascript:;",1,"btn","btn-transparent-success","font-weight-bold","mr-2",3,"click"],[3,"value"],[1,"col-xs-12","col-md-12","mt-10"],[1,"d-flex","align-items-center","text-dark","text-hover-primary","font-size-h5","font-weight-bold","ml-5"],[1,"flaticon2-correct","text-success","icon-md","ml-2"],[1,"text-muted","ml-15"],["type","button","style","color: #7AB800 !important","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"col-xs-12","col-md-12",2,"flex","0 0 0% !important"],[1,"example-header"],["matInput","","placeholder","Buscar",3,"keyup"],[1,"col-xs-12","col-md-12"],[3,"pageSizeOptions"],["matPaginator7",""],["matSort","",3,"dataSource"],["sort7","matSort"],["matColumnDef","Actualizaciones"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Mes"],["matColumnDef","Estatus"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["type","button",1,"btn","btn-outline-secondary",2,"color","#7AB800 !important",3,"click"],[1,"fas","fa-upload"],[1,"fas","fa-circle-notch"],["mat-sort-header",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"label","font-weight-bold","label-lg","label-light-danger","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-primary","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-success","label-inline"],[3,"VistaPrincipal"],["sharecmp",""]],template:function(e,t){1&e&&(q.Ic(0,ye,19,3,"div",0),q.Ic(1,Le,36,8,"div",0),q.Ic(2,je,3,0,"div",1),q.Vb(3,"ngx-spinner",2),q.Vb(4,"p",3),q.Kc(5," Loading... "),q.Ub(),q.Ub()),2&e&&(q.pc("ngIf",t.Page.ShowSeleccionEmpresa),q.Cb(1),q.pc("ngIf",t.Page.ShowList),q.Cb(1),q.pc("ngIf",t.Page.ShowLoad),q.Cb(1),q.pc("fullScreen",!0))},directives:[s.n,X.a,d.w,d.o,d.r,s.m,d.s,d.y,U.c,V.b,j.a,E.j,Q.a,E.c,E.e,E.b,E.g,E.i,E.d,Q.b,E.a,s.p,s.q,E.f,E.h,Ce],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}.mat-table[_ngcontent-%COMP%]{overflow-x:scroll}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:normal;display:table-cell;padding:0 10px;line-break:unset;width:90%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{display:table-row}"],changeDetection:0}),Te),$e=n("wl6q"),_e=((Be=function(){function e(t,a,n){i(this,e),this.api=t,this.router=a,this.http=n,this.oDetalleSolicitud={}}return t(e,[{key:"download",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.http.get("".concat(ce.a.apiUrl,"/").concat(e,"/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token},responseType:"blob"}).toPromise()}},{key:"downloadPost",value:function(e,t){var i=localStorage.getItem("auth"),a=JSON.parse(i);return this.http.post("".concat(ce.a.apiUrl,"/").concat(e,"/"),t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token},responseType:"blob"}).toPromise()}}]),e}()).\u0275fac=function(e){return new(e||Be)(q.cc(ne.a),q.cc(b.h),q.cc(re.b))},Be.\u0275prov=q.Lb({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be),Ne=["sharecmp"],Je=["matPaginator7"],qe=["sort7"];function We(e,t){if(1&e&&(q.Vb(0,"option",56),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.pc("value",i.Valor),q.Cb(1),q.Mc(" ",i.Descripcion," ")}}function He(e,t){1&e&&(q.Vb(0,"mat-header-cell"),q.Kc(1," Actions "),q.Ub())}function Xe(e,t){if(1&e){var i=q.Wb();q.Vb(0,"mat-cell"),q.Vb(1,"a",57),q.fc("click",function(){q.zc(i);var e=t.$implicit;return q.jc().DescargarOpinion(e)}),q.Qb(2,"i",58),q.Ub(),q.Ub()}}function Ye(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1,"Verifica Datos"),q.Ub())}function Ze(e,t){if(1&e){var i=q.Wb();q.Vb(0,"mat-cell"),q.Vb(1,"span",60),q.fc("click",function(){q.zc(i);var e=t.$implicit;return q.jc().VerificaSAT(e)}),q.Kc(2," Validar "),q.Ub(),q.Ub()}}function et(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," Validacion Documento "),q.Ub())}function tt(e,t){if(1&e&&(q.Vb(0,"div"),q.Vb(1,"span",63),q.Kc(2),q.Ub(),q.Ub()),2&e){var i=q.jc().$implicit;q.Cb(2),q.Mc(" ",i.StatusValidacion,"")}}function it(e,t){if(1&e&&(q.Vb(0,"div"),q.Vb(1,"span",64),q.Kc(2),q.Ub(),q.Ub()),2&e){var i=q.jc().$implicit;q.Cb(2),q.Mc(" ",i.StatusValidacion,"")}}function at(e,t){if(1&e&&(q.Vb(0,"div"),q.Vb(1,"span",65),q.Kc(2),q.Ub(),q.Ub()),2&e){var i=q.jc().$implicit;q.Cb(2),q.Mc(" ",i.StatusValidacion,"")}}function nt(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Vb(1,"div",61),q.Ic(2,tt,3,1,"div",62),q.Ic(3,it,3,1,"div",62),q.Ic(4,at,3,1,"div",62),q.Ub(),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.pc("ngSwitch",i.StatusValidacion),q.Cb(1),q.pc("ngSwitchCase","Sin posibles ediciones"),q.Cb(1),q.pc("ngSwitchCase","Documento Editado"),q.Cb(1),q.pc("ngSwitchCase","Posiblemente Editado")}}function ot(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1,"Fecha Documento"),q.Ub())}function rt(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.kc(2,"date"),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",q.mc(2,1,i.FechaDocumento,"yyyy-MM-dd")," ")}}function ct(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," RFC "),q.Ub())}function lt(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.RFC," ")}}function st(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," Opinion "),q.Ub())}function bt(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.Opinion," ")}}function dt(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," Razon Social "),q.Ub())}function ut(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.RazonSocial," ")}}function pt(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," Fecha Consulta Documento SAT "),q.Ub())}function ht(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.FechaConsulta," ")}}function ft(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," Fecha Carga Documento "),q.Ub())}function mt(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.kc(2,"date"),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",q.mc(2,1,i.FechaCargaDocumento,"yyyy-MM-dd @ HH:mm")," ")}}function gt(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," Folio "),q.Ub())}function vt(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.Folio," ")}}function Ct(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," Cadena Original "),q.Ub())}function St(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.CadenaOriginal," ")}}function Vt(e,t){1&e&&(q.Vb(0,"mat-header-cell",59),q.Kc(1," SelloDigital "),q.Ub())}function Ut(e,t){if(1&e&&(q.Vb(0,"mat-cell"),q.Kc(1),q.Ub()),2&e){var i=t.$implicit;q.Cb(1),q.Mc(" ",i.SelloDigital," ")}}function wt(e,t){1&e&&q.Qb(0,"mat-header-row")}function yt(e,t){1&e&&q.Qb(0,"mat-row")}function kt(e,t){if(1&e){var i=q.Wb();q.Vb(0,"div"),q.Vb(1,"kt-cargaoponioncumplimiento",66,67),q.fc("VistaPrincipal",function(e){return q.zc(i),q.jc().ShowVistaPrincipal(e)}),q.Ub(),q.Ub()}}var Pt,Dt,Ft=function(){return[25,50,75,100]},Ot=[{path:"",component:W,children:[{path:"operations/verdict",component:Qe},{path:"operations/vendorsreview",component:(Pt=function(){function e(t,a,n,o,r,c,l,s,b,d,u,p){i(this,e),this.snackBar=t,this.AuthService=a,this.modalService=n,this.toastr=o,this.spinnerService=r,this.router=c,this.sanitizer=l,this.ScreenActionsService=s,this.ExcelService=b,this.ref=d,this.OpinionCumplimientoService=u,this.DownloadService=p,this.Page={},this.Screen={},this.General={},this.panelOpenState=!1,this.ListaTipoOpinion=[],this.displayedColumns7=["actions","Validacion","StatusValidacion","FechaDocumento","RFC","Opinion","RazonSocial","FechaConsulta","FechaCargaDocumento","Folio","CadenaOriginal","SelloDigital"],this.Page.ShowLoad=!1,this.Page.ShowRechazo=!1,this.Page.ShowEdit=!1,this.Page.ShowList=!1,this.Page.Controller=this.router.routerState.snapshot.url.toString().substr(this.router.routerState.snapshot.url.lastIndexOf("/")+1,this.router.routerState.snapshot.url.toString().length-1),this.General.Filtros={},this.ListaTipoOpinion.push({Valor:1,Descripcion:"Negativo"},{Valor:2,Descripcion:"Positivo"},{Valor:3,Descripcion:"Todas"}),this.General.Data=[]}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.ScreenActionsService.PromiseAcciones(this.Page.Controller).then(function(t){e.Screen=t,0!=Object.keys(e.Screen).length&&e.Screen.Get?(e.ref.markForCheck(),e.CargaDatos()):(e.toastr.error("Si intenta acceder a una opci\xf3n no permitida su cuenta ser\xe1 suspendida"),e.router.navigate(["dashboard"]))},function(t){e.handleError(t)})}},{key:"CargaDatos",value:function(){var e=this;this.Page.ShowList=!0,this.General.Data.length=0,this.spinnerService.show(),this.dataSourceSolicitudes=new E.k([]),this.OpinionCumplimientoService.GetRevisionOpiniones().subscribe(function(t){e.General.Data=t,e.dataSourceSolicitudes=new E.k(t),e.dataSourceSolicitudes.paginator=e.paginator7,e.dataSourceSolicitudes.sort=e.sort7,e.spinnerService.hide(),e.ref.markForCheck()},function(t){e.handleError(t)})}},{key:"AplicaFiltros",value:function(){var e=this;0!=Object.keys(this.General.Filtros).length?null==this.General.Filtros.FechaFinal||null==this.General.Filtros.FechaFinal||""==this.General.Filtros.FechaFinal||null!=this.General.Filtros.FechaInicial&&(null!=this.General.Filtros.FechaInicial||""!=this.General.Filtros.FechaInicial)?(this.General.Data.length=0,this.OpinionCumplimientoService.AplicaFiltros(this.General.Filtros).subscribe(function(t){e.General.Data=t,e.dataSourceSolicitudes=new E.k(t),e.dataSourceSolicitudes.paginator=e.paginator7,e.dataSourceSolicitudes.sort=e.sort7,e.spinnerService.hide(),e.ref.markForCheck()},function(t){e.handleError(t)})):this.toastr.error("Debe seleccionar la fecha inicial"):this.toastr.error("Filtros no v\xe1lidos","Error")}},{key:"Exportar",value:function(){var e=this.General.Data.map(function(e){return{FechaDocumento:e.FechaDocumento,StatusValidacion:e.StatusValidacion,RFC:e.RFC,Folio:e.Folio,RazonSocial:e.RazonSocial,Opinion:e.Opinion,FechaConsulta:e.FechaConsulta,CadenaOriginal:e.CadenaOriginal,SelloDigital:e.SelloDigital,FechaCargaDocumento:e.FechaCargaDocumento}});this.spinnerService.show(),this.ExcelService.exportAsExcelFile(e,"OpinionProveedores"),this.spinnerService.hide()}},{key:"ResetData",value:function(){this.CargaDatos()}},{key:"ShowLoad",value:function(){this.Page.ShowLoad=!0,this.Page.ShowList=!1}},{key:"ShowVistaPrincipal",value:function(e){this.Page.ShowLoad=!1,this.Page.ShowRechazo=!1,this.Page.ShowList=e,this.CargaDatos()}},{key:"ActualizarBandeja",value:function(){this.CargaDatos()}},{key:"DescargarOpinion",value:function(e){var t=this,i={};i.Value=e.Value,i.RFC=e.RFC,this.spinnerService.show(),this.DownloadService.downloadPost("report/vendorverdict",i).then(function(e){var a=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.target="_blank",o.download="OpinionCumplimiento_"+i.RFC+".pdf",document.body.appendChild(o),o.click(),t.spinnerService.hide()},function(e){t.toastr.error("Ocurrio un error al descargar la infomaci\xf3n"),t.spinnerService.hide()})}},{key:"VerificaSAT",value:function(e){var t,i,a,n=new Date(e.FechaDocumento),o=n.getDate(),r=n.getMonth()+1,c=n.getFullYear();a=r<10?"0"+r:r.toString(),i=o<10?"0"+o:o.toString(),t="https://siat.sat.gob.mx/app/qr/faces/pages/mobile/validadorqr.jsf?D1=1&D2=1&D3="+"".concat(e.Folio,"_").concat(e.RFC,"_").concat(i,"-").concat(a,"-").concat(c,"_").concat(e.Digito),window.open("about:blank","_blank").location.href=t,console.log(t)}},{key:"applyFilter7",value:function(e){this.dataSourceSolicitudes.filter=e.trim().toLowerCase(),this.dataSourceSolicitudes.paginator&&this.dataSourceSolicitudes.paginator.firstPage()}},{key:"handleError",value:function(e){this.AuthService.handleError(e),e&&e.error.Descripcion&&this.toastr.error(e.error.Descripcion),this.spinnerService.hide()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}}]),e}(),Pt.\u0275fac=function(e){return new(e||Pt)(q.Pb(R.a),q.Pb(Y.a),q.Pb(Z.y),q.Pb(ee.b),q.Pb(X.c),q.Pb(b.h),q.Pb(te.b),q.Pb(ie.a),q.Pb($e.a),q.Pb(q.i),q.Pb(oe),q.Pb(_e))},Pt.\u0275cmp=q.Jb({type:Pt,selectors:[["kt-bandejarevisionopinion"]],viewQuery:function(e,t){var i;1&e&&(q.Ec(Ne,!0),q.Ec(Je,!0),q.Ec(qe,!0)),2&e&&(q.wc(i=q.gc())&&(t.sharecmp=i.first),q.wc(i=q.gc())&&(t.paginator7=i.first),q.wc(i=q.gc())&&(t.sort7=i.first))},decls:114,vars:16,consts:[[1,"card","card-custom",3,"hidden"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"fa","fa-list","icon-md"],[1,"card-body"],[1,"row"],[1,"col-xs-12","col-md-12"],[3,"expanded","expandedChange"],[1,"Oferta",2,"font-weight","bold"],[1,"fas","fa-filter"],[1,"col-xs-12","col-md-2"],[1,"form-group"],["type","text","maxlength","13","aria-describedby","helpRFCCliente","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-xs-12","col-md-3"],["type","text","maxlength","50","aria-describedby","helpRazonSocial","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["required","","name","select","name","ddlTipoBusqueda",1,"form-control","form-control-sm",3,"value","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date","maxlength","4","aria-describedby","FechaInicialhelp","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","date","maxlength","4","aria-describedby","FechaFinalhelp","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-md-1"],["type","reset","name","edit",1,"btn","btn-success","btn-sm",2,"margin-top","25px",3,"click"],[1,"fas","fa-search"],["href","javascript:void(0)",1,"btn","btn-danger","btn-sm",2,"margin-top","25px",3,"click"],[1,"far","fa-times-circle"],[1,"col-xs-12","col-md-9"],[1,"col-xs-12","col-md-3","text-right"],["type","button","data-toggle","tooltip","title","Exportar datos a Excel",1,"btn","btn-outline-secondary",2,"color","#7AB800 !important",3,"click"],[1,"fas","fa-file-excel"],[1,"col-xs-12","col-md-12",2,"flex","0 0 0% !important"],[1,"example-header"],["matInput","","placeholder","Buscar",3,"keyup"],[3,"pageSizeOptions"],["matPaginator7",""],["matSort","",3,"dataSource"],["sort7","matSort"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Validacion"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","StatusValidacion"],["matColumnDef","FechaDocumento"],["matColumnDef","RFC"],["matColumnDef","Opinion"],["matColumnDef","RazonSocial"],["matColumnDef","FechaConsulta"],["matColumnDef","FechaCargaDocumento"],["matColumnDef","Folio"],["matColumnDef","CadenaOriginal"],["matColumnDef","SelloDigital"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[3,"value"],["href","javascript:;","title","Descargar Opinion de Cumplimiento",1,"btn","btn-xs","btn-default","btn-text-default","btn-hover-primary","btn-icon",3,"click"],[1,"fas","fa-cloud-download-alt"],["mat-sort-header",""],["data-toggle","tooltip","title","Consultar datos en SAT",1,"text-muted",2,"text-decoration","underline","cursor","pointer",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"label","font-weight-bold","label-lg","label-light-success","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-danger","label-inline"],[1,"label","font-weight-bold","label-lg","label-light-warning","label-inline"],[3,"VistaPrincipal"],["sharecmp",""]],template:function(e,t){1&e&&(q.Vb(0,"div",0),q.Vb(1,"div",1),q.Vb(2,"div",2),q.Vb(3,"h2",3),q.Qb(4,"i",4),q.Kc(5," Revisi\xf3n de opinion de cumplimiento para proveedores"),q.Ub(),q.Ub(),q.Ub(),q.Vb(6,"div",5),q.Vb(7,"div",6),q.Vb(8,"div",7),q.Vb(9,"mat-expansion-panel",8),q.fc("expandedChange",function(e){return t.panelOpenState=e}),q.Vb(10,"mat-expansion-panel-header"),q.Vb(11,"mat-panel-title"),q.Vb(12,"span",9),q.Qb(13,"i",10),q.Kc(14," B\xfasqueda Avanzada"),q.Ub(),q.Ub(),q.Ub(),q.Vb(15,"div",6),q.Vb(16,"div",11),q.Vb(17,"div",12),q.Vb(18,"label"),q.Kc(19,"RFC "),q.Ub(),q.Vb(20,"input",13),q.fc("ngModelChange",function(e){return t.General.Filtros.RFCCliente=e}),q.Ub(),q.Ub(),q.Ub(),q.Vb(21,"div",14),q.Vb(22,"div",12),q.Vb(23,"label"),q.Kc(24,"Raz\xf3n Social "),q.Ub(),q.Vb(25,"input",15),q.fc("ngModelChange",function(e){return t.General.Filtros.RazonSocial=e}),q.Ub(),q.Ub(),q.Ub(),q.Vb(26,"div",11),q.Vb(27,"div",12),q.Vb(28,"label"),q.Kc(29,"Tipo"),q.Ub(),q.Vb(30,"select",16),q.fc("ngModelChange",function(e){return t.General.Filtros.TipoOpinion=e}),q.Ic(31,We,2,2,"option",17),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Vb(32,"div",6),q.Vb(33,"div",11),q.Vb(34,"div",12),q.Vb(35,"label"),q.Kc(36,"Fecha Documento Inicial"),q.Ub(),q.Vb(37,"input",18),q.fc("ngModelChange",function(e){return t.General.Filtros.FechaInicial=e}),q.Ub(),q.Ub(),q.Ub(),q.Vb(38,"div",11),q.Vb(39,"div",12),q.Vb(40,"label"),q.Kc(41,"Fecha Documento Final"),q.Ub(),q.Vb(42,"input",19),q.fc("ngModelChange",function(e){return t.General.Filtros.FechaFinal=e}),q.Ub(),q.Ub(),q.Ub(),q.Vb(43,"div",20),q.Vb(44,"div",12),q.Vb(45,"button",21),q.fc("click",function(){return t.AplicaFiltros()}),q.Qb(46,"i",22),q.Kc(47," Buscar "),q.Ub(),q.Ub(),q.Ub(),q.Vb(48,"div",20),q.Vb(49,"div",12),q.Vb(50,"a",23),q.fc("click",function(){return t.ResetData()}),q.Qb(51,"i",24),q.Kc(52," Limpiar"),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Qb(53,"br"),q.Ub(),q.Ub(),q.Ub(),q.Vb(54,"div",6),q.Qb(55,"div",25),q.Vb(56,"div",26),q.Qb(57,"br"),q.Vb(58,"button",27),q.fc("click",function(){return t.Exportar()}),q.Qb(59,"i",28),q.Kc(60," Exportar"),q.Ub(),q.Ub(),q.Ub(),q.Vb(61,"div",6),q.Vb(62,"div",29),q.Qb(63,"br"),q.Vb(64,"div",30),q.Vb(65,"mat-form-field"),q.Vb(66,"input",31),q.fc("keyup",function(e){return t.applyFilter7(e.target.value)}),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Vb(67,"div",7),q.Qb(68,"mat-paginator",32,33),q.Vb(70,"mat-table",34,35),q.Tb(72,36),q.Ic(73,He,2,0,"mat-header-cell",37),q.Ic(74,Xe,3,0,"mat-cell",38),q.Sb(),q.Tb(75,39),q.Ic(76,Ye,2,0,"mat-header-cell",40),q.Ic(77,Ze,3,0,"mat-cell",38),q.Sb(),q.Tb(78,41),q.Ic(79,et,2,0,"mat-header-cell",40),q.Ic(80,nt,5,4,"mat-cell",38),q.Sb(),q.Tb(81,42),q.Ic(82,ot,2,0,"mat-header-cell",40),q.Ic(83,rt,3,4,"mat-cell",38),q.Sb(),q.Tb(84,43),q.Ic(85,ct,2,0,"mat-header-cell",40),q.Ic(86,lt,2,1,"mat-cell",38),q.Sb(),q.Tb(87,44),q.Ic(88,st,2,0,"mat-header-cell",40),q.Ic(89,bt,2,1,"mat-cell",38),q.Sb(),q.Tb(90,45),q.Ic(91,dt,2,0,"mat-header-cell",40),q.Ic(92,ut,2,1,"mat-cell",38),q.Sb(),q.Tb(93,46),q.Ic(94,pt,2,0,"mat-header-cell",40),q.Ic(95,ht,2,1,"mat-cell",38),q.Sb(),q.Tb(96,47),q.Ic(97,ft,2,0,"mat-header-cell",40),q.Ic(98,mt,3,4,"mat-cell",38),q.Sb(),q.Tb(99,48),q.Ic(100,gt,2,0,"mat-header-cell",40),q.Ic(101,vt,2,1,"mat-cell",38),q.Sb(),q.Tb(102,49),q.Ic(103,Ct,2,0,"mat-header-cell",40),q.Ic(104,St,2,1,"mat-cell",38),q.Sb(),q.Tb(105,50),q.Ic(106,Vt,2,0,"mat-header-cell",40),q.Ic(107,Ut,2,1,"mat-cell",38),q.Sb(),q.Ic(108,wt,1,0,"mat-header-row",51),q.Ic(109,yt,1,0,"mat-row",52),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Ub(),q.Ic(110,kt,3,0,"div",53),q.Vb(111,"ngx-spinner",54),q.Vb(112,"p",55),q.Kc(113," Loading... "),q.Ub(),q.Ub()),2&e&&(q.pc("hidden",!t.Page.ShowList),q.Cb(9),q.pc("expanded",t.panelOpenState),q.Cb(11),q.pc("ngModel",t.General.Filtros.RFCCliente),q.Cb(5),q.pc("ngModel",t.General.Filtros.RazonSocial),q.Cb(5),q.pc("value",0)("ngModel",t.General.Filtros.TipoOpinion),q.Cb(1),q.pc("ngForOf",t.ListaTipoOpinion),q.Cb(6),q.pc("ngModel",t.General.Filtros.FechaInicial),q.Cb(5),q.pc("ngModel",t.General.Filtros.FechaFinal),q.Cb(26),q.pc("pageSizeOptions",q.sc(15,Ft)),q.Cb(2),q.pc("dataSource",t.dataSourceSolicitudes),q.Cb(38),q.pc("matHeaderRowDef",t.displayedColumns7),q.Cb(1),q.pc("matRowDefColumns",t.displayedColumns7),q.Cb(1),q.pc("ngIf",t.Page.ShowLoad),q.Cb(1),q.pc("fullScreen",!0))},directives:[N.c,N.f,N.g,d.d,d.k,d.o,d.r,d.w,d.v,s.m,U.c,V.b,j.a,E.j,Q.a,E.c,E.e,E.b,E.g,E.i,s.n,X.a,d.s,d.y,E.d,E.a,Q.b,s.p,s.q,E.f,E.h,Ce],pipes:[s.e],styles:["#divOficiosUpLoad[_ngcontent-%COMP%]{float:left;width:125px;height:125px;text-align:center;cursor:pointer;margin-left:25px;margin-right:25px;border-radius:12px;background-color:#fff;border:1px solid #d3d4d2}#divOficiosUpLoad[_ngcontent-%COMP%]:hover{border:1px solid #a5a6a4}.mat-table[_ngcontent-%COMP%]{overflow-x:scroll}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:normal;display:table-cell;padding:0 10px;line-break:unset;width:90%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{display:table-row}.Oferta[_ngcontent-%COMP%]{font-size:11px;font-weight:400;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}"],changeDetection:0}),Pt)}]}],It=((Dt=function e(){i(this,e)}).\u0275mod=q.Nb({type:Dt}),Dt.\u0275inj=q.Mb({factory:function(e){return new(e||Dt)},providers:[g.c,{provide:_.d,useValue:{}},{provide:_.a,useValue:{}},{provide:f.f,useValue:"en-GB"},{provide:S.a,useValue:{useUtc:!0}}],imports:[[s.c,V.c,U.e,C.c,w.b,M.d,A.b,F.g,D.b,y.c,g.b,f.m,h.b,v.b,O.c,k.d,P.b,K.g,I.b,x.b,R.b,E.l,G.b,$.b,_.c,N.b,J.b,Q.c,B.d,T.e,j.b,m.f,f.u,u.a,l.c,L.d,z.c,p.a,H.a,X.b,d.j,d.u,b.l.forChild(Ot)],b.l]}),Dt)}}])}();